<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Oracle Digital Assistant - Web SDK User Guide</title>
    <link rel="stylesheet" href="./guide-style.css">
</head>

<body class="vscode-body">
    <!-- omit in toc -->
    <h1 id="web-sdk">Web SDK</h1>
    <p>Use Oracle Digital Assistant's Client SDK for JavaScript to add live messaging to your website or web app.</p>
    <ul>
        <li><a href="#installation">Installation</a>
            <ul>
                <li><a href="#html-script-tag">HTML script tag</a></li>
                <li><a href="#importing-sdk-library-in-javascript">Importing SDK library in JavaScript</a></li>
                <li><a href="#import-the-library-using-the-asynchronous-module-definition-api">Import the Library Using
                        the Asynchronous Module Definition API</a></li>
            </ul>
        </li>
        <li><a href="#browser-support">Browser Support</a></li>
        <li><a href="#sdk-security">SDK Security</a>
            <ul>
                <li><a href="#channel-with-client-auth-disabled">Channel with Client Auth Disabled</a></li>
                <li><a href="#channel-with-client-auth-enabled">Channel with Client Auth Enabled</a></li>
                <li><a href="#jwt-token">JWT Token</a></li>
            </ul>
        </li>
        <li><a href="#settings">Settings</a>
            <ul>
                <li><a href="#network-configuration">Network Configuration</a></li>
                <li><a href="#feature-flags">Feature Flags</a></li>
                <li><a href="#functionality-configuration">Functionality Configuration</a></li>
                <li><a href="#layout-modification">Layout Modification</a></li>
                <li><a href="#custom-colors">Custom Colors</a></li>
                <li><a href="#custom-icons">Custom Icons</a></li>
                <li><a href="#custom-text">Custom Text</a></li>
                <li><a href="#customizing-css-classes">Customizing CSS Classes</a></li>
            </ul>
        </li>
        <li><a href="#enums">Enums</a>
            <ul>
                <li><a href="#websdkevent">WebSDK.EVENT</a></li>
                <li><a href="#websdkspeech_locale">WebSDK.SPEECH_LOCALE</a></li>
                <li><a href="#websdktheme">WebSDK.THEME</a></li>
            </ul>
        </li>
        <li><a href="#methods">Methods</a>
            <ul>
                <li><a href="#connect">connect()</a></li>
                <li><a href="#connectconfig">connect(config)</a></li>
                <li><a href="#disconnect">disconnect()</a></li>
                <li><a href="#isconnected">isConnected()</a></li>
                <li><a href="#openchat">openChat()</a></li>
                <li><a href="#closechat">closeChat()</a></li>
                <li><a href="#ischatopened">isChatOpened()</a></li>
                <li><a href="#destroy">destroy()</a></li>
                <li><a href="#sendattachmentfile">sendAttachment(file)</a></li>
                <li><a href="#sendmessagemessage-flags">sendMessage(message, flags)</a></li>
                <li><a href="#updateuseruserdetails">updateUser(userDetails)</a></li>
                <li><a href="#getsuggestionsquery">getSuggestions(query)</a></li>
                <li><a href="#startvoicerecordingonspeechrecognition-onspeechnetworkchange-options">startVoiceRecording(onSpeechRecognition,
                        onSpeechNetworkChange, options)</a></li>
                <li><a href="#stopvoicerecording">stopVoiceRecording()</a></li>
                <li><a href="#setspeechlocalelocale">setSpeechLocale(locale)</a></li>
                <li><a href="#setprimarylanguagelanguagetag">setPrimaryLanguage(languageTag)</a></li>
                <li><a href="#setskillvoicesvoices">setSkillVoices(voices)</a></li>
                <li><a href="#setdelegatedelegate">setDelegate(delegate)</a></li>
                <li><a href="#getconversationhistory">getConversationHistory()</a></li>
                <li><a href="#clearconversationhistoryuserid-shouldclearwidget">clearConversationHistory(userId,
                        shouldClearWidget)</a></li>
                <li><a
                        href="#clearallconversationshistoryshouldclearwidget">clearAllConversationsHistory(shouldClearWidget)</a>
                </li>
                <li><a href="#getunreadmessagescount">getUnreadMessagesCount()</a></li>
                <li><a href="#setallmessagesasread">setAllMessagesAsRead()</a></li>
                <li><a href="#setuserinputmessagetext">setUserInputMessage(text)</a></li>
                <li><a href="#setuserinputplaceholdertext">setUserInputPlaceholder(text)</a></li>
                <li><a href="#showtypingindicator">showTypingIndicator()</a></li>
                <li><a href="#setwebviewconfigwebviewconfig">setWebViewConfig(webViewConfig)</a></li>
                <li><a href="#setchatbubbleiconheightheight">setChatBubbleIconHeight(height)</a></li>
                <li><a href="#setchatbubbleiconwidthwidth">setChatBubbleIconWidth(width)</a></li>
                <li><a href="#setchatbubbleiconsizewidth-height">setChatBubbleIconSize(width, height)</a></li>
                <li><a href="#setfontfont">setFont(font)</a></li>
                <li><a href="#setfontfamilyfontfamily">setFontFamily(fontFamily)</a></li>
                <li><a href="#setfontsizefontsize">setFontSize(fontSize)</a></li>
                <li><a href="#setheightheight">setHeight(height)</a></li>
                <li><a href="#setwidthwidth">setWidth(width)</a></li>
                <li><a href="#setsizewidth-height">setSize(width, height)</a></li>
                <li><a href="#setmessagepaddingpadding">setMessagePadding(padding)</a></li>
                <li><a href="#settextcolorcolor">setTextColor(color)</a></li>
                <li><a href="#settextcolorlightcolor">setTextColorLight(color)</a></li>
            </ul>
        </li>
        <li><a href="#events">Events</a>
            <ul>
                <li><a href="#ready">ready</a></li>
                <li><a href="#destroy-1">destroy</a></li>
                <li><a href="#messagereceived">message:received</a></li>
                <li><a href="#messagesent">message:sent</a></li>
                <li><a href="#message">message</a></li>
                <li><a href="#networkstatuschange">networkstatuschange</a></li>
                <li><a href="#typing">typing</a></li>
                <li><a href="#unreadcount">unreadCount</a></li>
                <li><a href="#widgetopened">widget:opened</a></li>
                <li><a href="#widgetclosed">widget:closed</a></li>
                <li><a href="#clickaudiotoggle">click:audiotoggle</a></li>
                <li><a href="#clickerase">click:erase</a></li>
                <li><a href="#clickvoicetoggle">click:voicetoggle</a></li>
                <li><a href="#chatlanguagechange">chatlanguagechange</a></li>
            </ul>
        </li>
        <li><a href="#features">Features</a>
            <ul>
                <li><a href="#autocomplete">Autocomplete</a></li>
                <li><a href="#delegation">Delegation</a>
                    <ul>
                        <li><a href="#beforedisplay">beforeDisplay</a></li>
                        <li><a href="#beforesend">beforeSend</a></li>
                        <li><a href="#beforepostbacksend">beforePostbackSend</a></li>
                    </ul>
                </li>
                <li><a href="#embedded-mode">Embedded mode</a></li>
                <li><a href="#headless-sdk">Headless SDK</a></li>
                <li><a href="#in-widget-webview">In-Widget WebView</a></li>
                <li><a href="#long-polling">Long Polling</a></li>
                <li><a href="#multi-lingual-chat">Multi-Lingual Chat</a></li>
                <li><a href="#response-narration">Response narration</a></li>
                <li><a href="#voice-recognition">Voice Recognition</a></li>
                <li><a href="#absolute-and-relative-timestamps">Absolute and Relative Timestamps</a></li>
            </ul>
        </li>
        <li><a href="#customizations">Customizations</a>
            <ul>
                <li><a href="#add-avatar-icons-with-messages">Add avatar icons with messages</a></li>
                <li><a href="#change-header-buttons-icons">Change header buttons icons</a></li>
                <li><a href="#draggable-launch-button">Draggable launch button</a></li>
                <li><a href="#focus-first-action-of-skill-message">Focus first action of skill message</a></li>
                <li><a href="#format-message-timestamps">Format message timestamps</a></li>
                <li><a href="#opening-links">Opening Links</a></li>
                <li><a href="#relative-timestamps">Relative Timestamps</a></li>
                <li><a href="#restrict-attachment-types">Restrict attachment types</a>
                    <ul>
                        <li><a href="#custom-share-menu-items">Custom share menu items</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#message-model">Message Model</a>
            <ul>
                <li><a href="#base-types">Base Types</a>
                    <ul>
                        <li><a href="#action">Action</a>
                            <ul>
                                <li><a href="#postbackaction">PostbackAction</a></li>
                                <li><a href="#callaction">CallAction</a></li>
                                <li><a href="#urlaction">UrlAction</a></li>
                                <li><a href="#shareaction">ShareAction</a></li>
                                <li><a href="#locationaction">LocationAction</a></li>
                            </ul>
                        </li>
                        <li><a href="#attachment">Attachment</a></li>
                        <li><a href="#card">Card</a></li>
                        <li><a href="#location">Location</a></li>
                    </ul>
                </li>
                <li><a href="#conversation-messages">Conversation Messages</a></li>
                <li><a href="#message-1">Message</a></li>
                <li><a href="#user-message">User Message</a>
                    <ul>
                        <li><a href="#user-text-message">User Text Message</a></li>
                        <li><a href="#user-attachment-message">User Attachment Message</a></li>
                        <li><a href="#user-location-message">User Location Message</a></li>
                        <li><a href="#user-postback-message">User Postback Message</a></li>
                    </ul>
                </li>
                <li><a href="#skill-message">Skill Message</a>
                    <ul>
                        <li><a href="#skill-text-message">Skill Text Message</a></li>
                        <li><a href="#skill-attachment-message">Skill Attachment Message</a></li>
                        <li><a href="#skill-location-message">Skill Location Message</a></li>
                        <li><a href="#skill-postback-message">Skill Postback Message</a></li>
                        <li><a href="#skill-card-message">Skill Card Message</a></li>
                        <li><a href="#skill-raw-message">Skill Raw Message</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#limitations">Limitations</a></li>
    </ul>
    <h2 id="installation">Installation</h2>
    <h3 id="html-script-tag">HTML script tag</h3>
    <ol>
        <li>First, save <code>web-sdk.js</code> in your project directory. Keep note of its location.</li>
        <li>Add the following code towards the end of the <code>head</code> section on your HTML page. Replace
            <code>&lt;Server URI&gt;</code> with location of <code>web-sdk.js</code>, and
            <code>&lt;WebSDK namespace&gt;</code> with a name for the library, which is typically <code>Bots</code>. The
            library will be referred by that name and used to make the API calls.
        </li>
    </ol>
    <pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> chatSettings = {
    <span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;Server URI&gt;&#x27;</span>,
    <span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;&lt;Channel ID&gt;&#x27;</span>,
    <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;&lt;User ID&gt;&#x27;</span>
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initSDK</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-comment">// If WebSDK is not available, reattempt later</span>
    <span class="hljs-keyword">if</span> (!WebSDK) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            initSDK(name);
        }, <span class="hljs-number">2000</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Default name is Bots</span>
    <span class="hljs-keyword">if</span> (!name) {
        name = <span class="hljs-string">&#x27;Bots&#x27;</span>;
    }

    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK(chatSettings);    <span class="hljs-comment">// Initiate library with configuration</span>
        Bots.connect()                          <span class="hljs-comment">// Connect to server</span>
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
               <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Connection Successful&#x27;</span>);
           })
           .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
               <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Connection failed&#x27;</span>);
               <span class="hljs-built_in">console</span>.log(reason);
           });

       <span class="hljs-built_in">window</span>[name] = Bots;
    }, <span class="hljs-number">0</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;WebSDK URL&gt;&quot;</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;initSDK(&#x27;&lt;WebSDK namespace&gt;&#x27;)&quot;</span>&gt;</span>
</div></code></pre>
    <p>You need to make a few minor modifications if you're connecting to a channel with client authentication enabled.
        Along with setting the <code>clientAuthEnabled</code> property to <code>true</code>, you must also include a
        function that generates and passes a JWT token. The function must return a <code>Promise</code> that resolves to
        a signed JWT token string. The SDK will use this function to generate a new token whenever it needs to establish
        a new connection because the existing token has expired. The script would look something like this:</p>
    <pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> chatSettings = {
    <span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;Server URI&gt;&#x27;</span>,
    <span class="hljs-attr">clientAuthEnabled</span>: <span class="hljs-literal">true</span>
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initSDK</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-comment">// If WebSDK is not available, reattempt later</span>
    <span class="hljs-keyword">if</span> (!WebSDK) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            initSDK(name);
        }, <span class="hljs-number">2000</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Default name is Bots</span>
    <span class="hljs-keyword">if</span> (!name) {
        name = <span class="hljs-string">&#x27;Bots&#x27;</span>;
    }

    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK(chatSettings);    <span class="hljs-comment">// Initiate library with configuration</span>
        Bots.connect()                          <span class="hljs-comment">// Connect to server</span>
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
               <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Connection Successful&#x27;</span>);
           })
           .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
               <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Connection failed&#x27;</span>);
               <span class="hljs-built_in">console</span>.log(reason);
           });

       <span class="hljs-built_in">window</span>[name] = Bots;
    }, <span class="hljs-number">0</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateToken</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>{
        fetch(<span class="hljs-string">&#x27;https://yourbackend.com/endpointToGenerateJWTToken&#x27;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">token</span>) </span>{
            resolve(token);
        })
    });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;WebSDK URL&gt;&quot;</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;initSDK(&#x27;&lt;WebSDK namespace&gt;&#x27;)&quot;</span>&gt;</span>
</div></code></pre>
    <p><em>Et voila!</em> You have an app integrated with Oracle Web SDK.</p>
    <h3 id="importing-sdk-library-in-javascript">Importing SDK library in JavaScript</h3>
    <p>To import the library dynamically in JavaScript, use the following utility function, which is based on the <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement#Dynamically_importing_scripts">MDN
            example</a> for importing scripts dynamically:</p>
    <pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchSDK</span>(<span class="hljs-params">src, onloadFunction, name</span>) </span>{
<span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;script&#x27;</span>);
script.type = <span class="hljs-string">&#x27;application/javascript&#x27;</span>;
script.async = <span class="hljs-literal">true</span>;    <span class="hljs-comment">// load the script asynchronously</span>
script.defer = <span class="hljs-literal">true</span>;    <span class="hljs-comment">// fallback support for browsers that does not support async</span>
script.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    onloadFunction(name);
};
<span class="hljs-built_in">document</span>.head.appendChild(script);
script.src = src;
}

fetchSDK(<span class="hljs-string">&#x27;&lt;path of the web-sdk&gt;&#x27;</span>, initSDK, <span class="hljs-string">&#x27;&lt;WebSDK namespace&gt;&#x27;</span>);
</div></code></pre>
    <h3 id="import-the-library-using-the-asynchronous-module-definition-api">Import the Library Using the Asynchronous
        Module Definition API</h3>
    <p>You can import the library using implementations of the Asynchronous Module Definition (AMD) API such as
        RequireJS with Oracle JET, and SystemJS.</p>
    <pre><code class="language-js"><div>requirejs([<span class="hljs-string">&#x27;&lt;path of the web-sdk&gt;&#x27;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">WebSDK</span>) </span>{
<span class="hljs-keyword">var</span> settings = {
    <span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;Server URI&gt;&#x27;</span>,
    <span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;&lt;Channel ID&gt;&#x27;</span>,
    <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;&lt;User ID&gt;&#x27;</span>
};
Bots = <span class="hljs-keyword">new</span> WebSDK(settings);

Bots.connect();
});

</div></code></pre>
    <h2 id="browser-support">Browser Support</h2>
    <p>The SDK is supported on these browsers on Mac, Windows, and Linux:</p>
    <ul>
        <li>Firefox</li>
        <li>Chrome</li>
        <li>Safari</li>
        <li>Edge</li>
    </ul>
    <p>For mobile platforms the following browsers are supported:</p>
    <ul>
        <li>Android browser</li>
        <li>iOS Safari</li>
    </ul>
    <h2 id="sdk-security">SDK Security</h2>
    <p>The Web SDK can connect to the Oracle Digital Assistant web channel in two modes: client auth disabled and client
        auth enabled.</p>
    <h3 id="channel-with-client-auth-disabled">Channel with Client Auth Disabled</h3>
    <p>When client authentication has been disabled, only connections made from unblocked lists (allowed domains) are
        allowed at the server. This use case is recommended when the client application can’t generate a signed JWT
        Token (because of a static website or no authentication mechanism for the web/mobile app) but requires ODA
        integration. It can also be used when the chat widget is already secured and visible to only authenticated users
        in the client platforms (Web Application with protected page).</p>
    <p>When connecting to such channels, <code>channelId</code> must be passed as a setting parameter during SDK
        initialization. The <code>userId</code> is also required to establish the connection. If you don't provide a
        value during initialization, then the SDK generates a random <code>userId</code>.</p>
    <pre><code class="language-js"><div>{
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;oda-instance.com&#x27;</span>,
<span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;626f5db1-f99a-4984-86ee-df2d734537e6&#x27;</span>,
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;Jessica&#x27;</span>
}
</div></code></pre>
    <h3 id="channel-with-client-auth-enabled">Channel with Client Auth Enabled</h3>
    <p>In addition to unblocked lists, client authentication is enforced by signed JWT tokens.</p>
    <p>The token generation and signing must be done by the client in the backend server ( preferably after user/client
        authentication) which is capable of maintaining the <code>keyId</code> and <code>keySecret</code> safe.</p>
    <p>When the SDK needs to establish a connection with the ODA server, it first requests a JWT token from the client
        and then sends it along with the connection request. The ODA server validates the token signature and obtains
        the claim set from the JWT payload to verify the token to establish the connection.</p>
    <p>To enable this mode, these two fields are required during SDK initialization:
        <code>clientAuthEnabled: true</code> must be passed in the SDK settings parameter, and a <strong>token generator
            function</strong> must be passed as the second parameter. The function must return a <code>Promise</code>,
        which is resolved to return a signed JWT token string.
    </p>
    <pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateToken</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>{
    fetch(<span class="hljs-string">&#x27;https://yourbackend.com/endpointToGenerateJWTToken&#x27;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">token</span>) </span>{
        resolve(token);
    });
});
}

Bots.init({
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;oda-instance.com&#x27;</span>,
<span class="hljs-attr">clientAuthEnabled</span>: <span class="hljs-literal">true</span>
}, generateToken);
</div></code></pre>
    <h3 id="jwt-token">JWT Token</h3>
    <p>The JWT token generation and signing are the responsibility of the client application. Some of the token payload
        fields are mandatory and are validated by the ODA server.</p>
    <p>Clients must use the HS256 signing algorithm to sign the tokens. The tokens must be signed by the secret key of
        the client auth enabled channel to which the connection is made. The body of the token must have the following
        claims:</p>
    <ul>
        <li><code>iat</code> - issued at time - must be a number representing seconds since UNIX epoch</li>
        <li><code>exp</code> - expiry time - must be a number representing seconds since UNIX epoch</li>
        <li><code>channelId</code> - channel ID - must be a string</li>
        <li><code>userId</code> - user ID - must be a string</li>
    </ul>
    <p>Here's a sample signed JWT token:</p>
    <p>Encoded token:</p>
    <pre><code><code><div>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1NzY3NDcyMDUsImV4cCI6MTU3Njc1MTExNywiY2hhbm5lbElkIjoiNDkyMDU5NWMtZWM3OS00NjE3LWFmOWYtNTk1MGQ2MDNmOGJiIiwidXNlcklkIjoiSm9obiIsImp0aSI6ImQzMjFjZDA2LTNhYTYtNGZlZS05NTBlLTYzZGNiNGVjODJhZCJ9.lwomlrI6XYR4nPQk0cIvyU_YMf4gYvfVpUiBjYihbUQ
</div></code></code></pre>
    <p>Decoded token:</p>
    <p>Header:</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;typ&quot;</span>: <span class="hljs-string">&quot;JWT&quot;</span>,
<span class="hljs-attr">&quot;alg&quot;</span>: <span class="hljs-string">&quot;HS256&quot;</span>
}
</div></code></pre>
    <p>Payload:</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;iat&quot;</span>: <span class="hljs-number">1576747205</span>,
<span class="hljs-attr">&quot;exp&quot;</span>: <span class="hljs-number">1576748406</span>,
<span class="hljs-attr">&quot;channelId&quot;</span>: <span class="hljs-string">&quot;4920595c-ec79-4617-af9f-5950d603f8bb&quot;</span>,
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;John&quot;</span>
}
</div></code></pre>
    <blockquote>
        <p>If any claim in the token is missing or has incorrect format for its value, an error message is thrown by the
            SDK describing the cause, and the connection is not attempted. The error message can be used to fix the
            issue with the JWT token.</p>
    </blockquote>
    <p>Any additional claims passed in the payload do not affect the client authentication mechanism.</p>
    <h2 id="settings">Settings</h2>
    <p>Use these properties to configure the chat widget:</p>
    <h3 id="network-configuration">Network Configuration</h3>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>Optional</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>URI</code></td>
                <td>No</td>
                <td></td>
                <td>Host name in ODA instance URL. Only the host section between the URL scheme, <code>https://</code>,
                    and first path, <code>/</code>, needs to be passed here.</td>
            </tr>
            <tr>
                <td><code>channelId</code></td>
                <td>No</td>
                <td></td>
                <td>The Web Channel ID</td>
            </tr>
            <tr>
                <td><code>userId</code></td>
                <td>Yes</td>
                <td>Random generated value</td>
                <td>A unique identifier for user. This ID gets initialized by SDK if one has not been provided.</td>
            </tr>
            <tr>
                <td><code>clientAuthEnabled</code></td>
                <td>Yes</td>
                <td><code>false</code></td>
                <td>Determines whether the SDK is connecting to a client authentication-enabled channel. This must be
                    set to <code>true</code> to connect to such a channel and use a JWT token for authentication.</td>
            </tr>
        </tbody>
    </table>
    <h3 id="feature-flags">Feature Flags</h3>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong><code>delegate</code></strong></td>
                <td></td>
                <td>An object that enables you to set a delegate to receive callbacks before certain events in the
                    conversation. See <a href="#delegation">Delegation</a> for more details.</td>
            </tr>
            <tr>
                <td><strong><code>embedded</code></strong></td>
                <td><code>false</code></td>
                <td>Embeds the chat widget inside another element referened by <code>targetElement</code> setting. See
                    <a href="#embedded-mode">Embedded mode</a> for more details.
                </td>
            </tr>
            <tr>
                <td><code>targetElement</code></td>
                <td></td>
                <td>The ID of the HTML element in DOM, such as a <code>div</code>, in which the chat widget is embedded.
                    to embed the chat widget. Must be passed when <code>embedded</code> is set <code>true</code>. The
                    element must have some dimensions (height and width), as the widget takes the dimensions of this
                    container.</td>
            </tr>
            <tr>
                <td><strong><code>enableAttachment</code></strong></td>
                <td><code>true</code></td>
                <td>Enables user to share files and location</td>
            </tr>
            <tr>
                <td><code>enableAttachmentSecurity</code></td>
                <td><code>false</code></td>
                <td><em>Only applicable for client auth enabled connections to ODA platform version 20.12 and
                        above</em>. When set <code>true</code>, extra headers are passed to the attachment upload
                    requests to ensure that they can't be downloaded without passing a valid signed JWT token in the URL
                    as value of <code>token</code> query parameter in the attachment fetch request URL. The setting must
                    not be enabled if connecting to an ODA instance Version 20.08 or older for compatibility.</td>
            </tr>
            <tr>
                <td><code>shareMenuItems</code></td>
                <td><code>['audio', 'file', 'location', 'visual']</code></td>
                <td>The categories shown in the share popup menu. Accepts an array with string values mapped to menu
                    items - <code>'visual'</code> for image and videos, <code>'audio'</code> for audio,
                    <code>'file'</code> for files, and <code>'location'</code> for location. Only the categories for
                    passed values are shown in the menu. If no/incorrect values are passed, all menu categories are
                    shown. Also allows passing custom share items. See <a href="#restrict-attachment-types">Restrict
                        attachment types</a> for more details on the flag and passing custom menu items.
                </td>
            </tr>
            <tr>
                <td><strong><code>enableAutocomplete</code></strong></td>
                <td><code>false</code></td>
                <td>Provides autocomplete suggestions as a user types a message in the input field. See <a
                        href="#autocomplete">Autocomplete</a> for more details.</td>
            </tr>
            <tr>
                <td><code>enableAutocompleteClientCache</code></td>
                <td><code>false</code></td>
                <td>Enables client side caching to minimize server calls when the user uses the autocomplete feature
                </td>
            </tr>
            <tr>
                <td><strong><code>enableBotAudioResponse</code></strong></td>
                <td><code>false</code></td>
                <td>Enables the utterance of a skill's responses as they are received using the Web speech synthesis
                    API. See <a href="#response-narration">Response narration</a> for more details.</td>
            </tr>
            <tr>
                <td><code>initBotAudioMuted</code></td>
                <td><code>true</code></td>
                <td>Initializes the skill message utterance in muted mode. Only applicable when
                    <code>enableBotAudioResponse</code> is <code>true</code>.
                </td>
            </tr>
            <tr>
                <td><code>skillVoices</code></td>
                <td>System language</td>
                <td>An array containing preferred voices used for narrating responses. Each item in the array should be
                    an object with two fields: <code>lang</code>, and <code>name</code>. <code>name</code> is optional.
                    The first item that matches a voice that’s available in the system will be used for the narration.
                </td>
            </tr>
            <tr>
                <td><strong><code>enableHeadless</code></strong></td>
                <td><code>false</code></td>
                <td>Initializes SDK instances without its chat widget while exposing its methods. Enables you to develop
                    your own UI for the chat. See <a href="#headless-sdk">Headless SDK</a> for more details.</td>
            </tr>
            <tr>
                <td><strong><code>enableLongPolling</code></strong></td>
                <td><code>false</code></td>
                <td>Enables use of HTTP-based communication with the skill as a fallback if the WebSocket connection
                    fails. See <a href="#long-polling">Long Polling</a> for more details.</td>
            </tr>
            <tr>
                <td><strong><code>enableSpeech</code></strong></td>
                <td><code>false</code></td>
                <td>Enables voice recognition service to allow the user to converse with the skill using voice messages
                    by converting their voice input to text message. See <a href="#voice-recognition">Voice
                        Recognition</a> for more details.</td>
            </tr>
            <tr>
                <td><code>enableSpeechAutoSend</code></td>
                <td><code>true</code></td>
                <td>Automatically sends voice recognized text to the skill</td>
            </tr>
            <tr>
                <td><code>speechLocale</code></td>
                <td><code>'en-us'</code></td>
                <td>The locale of the voice recognition the user is expected to speak in. The supported locales are
                    <code>'en-us</code>, <code>'es-es'</code>, <code>'fr-fr'</code>, and <code>'pt-br'</code>.
                </td>
            </tr>
            <tr>
                <td><strong><code>enableTimestamp</code></strong></td>
                <td><code>true</code></td>
                <td>Displays timestamp below messages as they are seen by the user. See <a
                        href="#absolute-and-relative-timestamps">Absolute and Relative Timestamps</a> for more details.
                </td>
            </tr>
            <tr>
                <td><code>timestampFormat</code></td>
                <td><code>{ weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }</code></td>
                <td>Allows the formatting of the delivery timestamp shown with messages. Accepts values in <a
                        href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#Syntax">DateTimeFormat</a>
                    options object or a pattern string. See <a href="#format-message-timestamps">Format message
                        timestamps</a> for more details.</td>
            </tr>
            <tr>
                <td><code>timestampMode</code></td>
                <td><code>'default'</code></td>
                <td>Selects the timestamp format as either absolute timestamps that appear on each message when set
                    <code>'default'</code>, or as a relative timestamp that appears only on the latest message, when set
                    <code>'relative'</code>. See <a href="#relative-timestamps">Relative Timestamps</a> for more
                    details.
                </td>
            </tr>
            <tr>
                <td><strong><code>multiLangChat</code></strong></td>
                <td></td>
                <td>Enables the chat widget to both detect a user's language and allow the user to select a preferred
                    language from a dropdown menu in the header for conversation. See <a
                        href="#multi-lingual-chat">Multi-Lingual Chat</a> for more details.</td>
            </tr>
            <tr>
                <td><strong><code>webViewConfig</code></strong></td>
                <td><code>{ referrerPolicy: 'no-referrer-when-downgrade', closeButtonType: 'icon', size: 'tall' }</code>
                </td>
                <td>Enables customizations to the in-widget webview, including its clear button, its header, and the
                    partial or full-screen sizing of the webview itself. See <a href="#in-widget-webview">In-Widget
                        WebView</a> for more details.</td>
            </tr>
        </tbody>
    </table>
    <h3 id="functionality-configuration">Functionality Configuration</h3>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>customHeaderElementId</code></td>
                <td></td>
                <td>The ID of the element to add to the chat widget header. Used for adding additional elements to the
                    chat widget header.</td>
            </tr>
            <tr>
                <td><code>disablePastActions</code></td>
                <td><code>'all'</code></td>
                <td>Disables action buttons in a skill message once user has interacted with it. When set to
                    <code>all</code>, all action buttons of the message are disabled upon interaction. Setting
                    <code>postback</code> only disables postback and location messages, and setting <code>none</code>
                    keeps all buttons enabled even after interaction.
                </td>
            </tr>
            <tr>
                <td><code>displayActionsAsPills</code></td>
                <td><code>false</code></td>
                <td>Displays action buttons as pills</td>
            </tr>
            <tr>
                <td><code>embeddedVideo</code></td>
                <td><code>false</code></td>
                <td>Embeds YouTube video links to be playable within chat widget if passed in the messages if set
                    <code>true</code>
                </td>
            </tr>
            <tr>
                <td><code>embedBottomScrollId</code></td>
                <td></td>
                <td>The ID of the element to be added as a scrollable content at bottom of chat. The element must be a
                    part of the DOM.</td>
            </tr>
            <tr>
                <td><code>embedBottomStickyId</code></td>
                <td></td>
                <td>The ID of the element to be added as a pinned content at bottom of chat. The element must be a part
                    of the DOM.</td>
            </tr>
            <tr>
                <td><code>embedTopScrollId</code></td>
                <td></td>
                <td>The ID of the element to be added as a scrollable content at top of chat. The element must be a part
                    of the DOM.</td>
            </tr>
            <tr>
                <td><code>embedTopStickyId</code></td>
                <td></td>
                <td>The ID of the element to be added as a pinned content at top of chat. The element must be a part of
                    the DOM.</td>
            </tr>
            <tr>
                <td><code>enableClearMessage</code></td>
                <td><code>false</code></td>
                <td>Displays a 'clear messages' button in the chat widget header</td>
            </tr>
            <tr>
                <td><code>enableDraggableButton</code></td>
                <td><code>false</code></td>
                <td>Enables users to drag the launch button out of the way when it's blocking content on the page. See
                    <a href="#draggable-launch-button">Draggable launch button</a> for more details.
                </td>
            </tr>
            <tr>
                <td><code>enableLocalConversationHistory</code></td>
                <td><code>false</code></td>
                <td>Loads previous conversations for a passed userId on the current browser when the chat widget is
                    initialized</td>
            </tr>
            <tr>
                <td><code>focusOnNewMessage</code></td>
                <td><code>'input'</code></td>
                <td>Sets the focus on either the user input field, or on the first action button in a message when a new
                    message is received. When set to <code>'action'</code>, the focus is the first action button (if the
                    message has action buttons) when a message is received. If the message has no buttons, then the
                    focus is the user input field. When set to <code>'input'</code>, the user input field remains as the
                    focus when new messages are received. See <a href="#focus-first-action-of-skill-message">Focus first
                        action of skill message</a> for more details.</td>
            </tr>
            <tr>
                <td><code>i18n</code></td>
                <td><code>{'en': {...}}</code></td>
                <td>The object that contains locale fields; each locale maintains i18n key-value pairs for certain
                    strings that are used in the widget. See <a href="#custom-text">Custom Text</a> for the strings that
                    you can customize.</td>
            </tr>
            <tr>
                <td><code>initUserHiddenMessage</code></td>
                <td></td>
                <td>A user message to send once the chat widget is expanded and connected to the skill, without
                    displaying the message in the chat widget. Used to initiate the conversation automatically. The
                    message can be a text string, like <code>'Hi'</code>, or a message object, like
                    <code>{ type: 'text', text: 'Hi'}</code>, or
                    <code>{ messagePayload: { type: 'text', text: 'Hi'}}</code>.
                </td>
            </tr>
            <tr>
                <td><code>initUserProfile</code></td>
                <td></td>
                <td>Initializes the user profile before the conversation starts. The profile payload must be of format
                    <code>{ profile: {...} }</code>. The profile is updated before sending the value in
                    <code>initUserHiddenMessage</code>.
                </td>
            </tr>
            <tr>
                <td><code>initMessageOptions</code></td>
                <td><code>{ sendAt: 'expand' }</code></td>
                <td>Customizes the <code>initUserHiddenMessage</code> and <code>initUserProfile</code> behavior. It
                    accepts an object with a <code>sendAt</code> property that can be set to either
                    <code>'expand'</code> or <code>'init'</code>. If set <code>'expand'</code>, the init messages are
                    sent once the chat widget is expanded. If set <code>'init'</code> on the other hand, the init
                    messages are sent immediately on connection, whether the widget is expanded or not.
                </td>
            </tr>
            <tr>
                <td><code>isDebugMode</code></td>
                <td><code>false</code></td>
                <td>Allows the SDK to log statements in console for debugging purposes</td>
            </tr>
            <tr>
                <td><code>linkHandler</code></td>
                <td><code>{ onclick: &lt;function&gt;, target: 'string' }</code></td>
                <td>An object that overrides the configuration for handling the clicks on the links that are embedded in
                    the skill's responses. This object handles links in two ways, setting link's target in field
                    <code>target</code> which accepts a string, and/or adding a click event listener in field
                    <code>onclick</code>. When you want all links to open in WebView, pass
                    <code>linkHandler: { target: 'oda-chat-webview'}</code>. See <a href="#opening-links">Opening
                        Links</a> for more details.
                </td>
            </tr>
            <tr>
                <td><code>locale</code></td>
                <td><code>'en'</code></td>
                <td>The default locale which is used for the informational text in the SDK. The locale passed has higher
                    preference over users' browser locales. If there isn't an exact match, then the SDK attempts to
                    match the closest language. For example, if the locale is <code>'da-dk'</code>, but i18n
                    translations are provided only for <code>'da'</code>, then the <code>'da'</code> translation is
                    used. In absence of translations for passed locale, translations are searched and applied for
                    browser locales. In absence of translations for any of them, the default locale, <code>'en'</code>
                    is used for translations.</td>
            </tr>
            <tr>
                <td><code>messageCacheSizeLimit</code></td>
                <td><code>2000</code></td>
                <td>Maximum number of messages to be saved in localStorage at a time</td>
            </tr>
            <tr>
                <td><code>openChatOnLoad</code></td>
                <td><code>false</code></td>
                <td>Expands chat widget when the SDK instance is initialized</td>
            </tr>
            <tr>
                <td><code>openLinksInNewWindow</code></td>
                <td><code>false</code></td>
                <td>If set to <code>true</code>, the target is opened in a new window when a link in a message is
                    clicked. The browser's preference is not followed. See <a href="#opening-links">Opening Links</a>
                    for more details.</td>
            </tr>
            <tr>
                <td><code>readMark</code></td>
                <td><code>'✓'</code></td>
                <td>Sets the symbol that denotes that a skill's message has been seen. This symbol is displayed along
                    with the timestamp, and not disabled if <code>enableTimestamp</code> is set <code>false</code>.</td>
            </tr>
            <tr>
                <td><code>showConnectionStatus</code></td>
                <td><code>false</code></td>
                <td>Displays current connection status in chat header below title</td>
            </tr>
            <tr>
                <td><code>showPrevConvStatus</code></td>
                <td><code>true</code></td>
                <td>Displays a status message at the end of messages from previous conversations for given userId</td>
            </tr>
            <tr>
                <td><code>showTypingIndicator</code></td>
                <td><code>true</code></td>
                <td>Displays an indicator in conversation pane while waiting for the skill's response</td>
            </tr>
            <tr>
                <td><code>storageType</code></td>
                <td><code>'localStorage'</code></td>
                <td>A web storage mechanism that is used to store the conversation history of users whose
                    <code>userId</code> is passed by the host app. The supported values are <code>'localStorage'</code>
                    and <code>'sessionStorage'</code>. Anonymous users' conversations are always stored in
                    <code>sessionStorage</code>, and deleted automatically when the browser session ends.
                </td>
            </tr>
            <tr>
                <td><code>theme</code></td>
                <td><code>'default'</code></td>
                <td>Chat widget theme. The supported values are <code>'default'</code>, a dark blue theme,
                    <code>'redwood-dark</code>, a dark redwood theme, and <code>'classic'</code>, a light blue theme.
                </td>
            </tr>
            <tr>
                <td><code>typingIndicatorTimeout</code></td>
                <td><code>20</code></td>
                <td>Allows setting the time in the number of seconds after which the typing indicator is automatically
                    removed if the chat widget has not yet received the response.</td>
            </tr>
        </tbody>
    </table>
    <h3 id="layout-modification">Layout Modification</h3>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>badgePosition</code></td>
                <td><code>{top: '0', right: '0'}</code></td>
                <td>The position of the notification badge icon with respect to the skill button</td>
            </tr>
            <tr>
                <td><code>colors</code></td>
                <td><code>{branding: '#1B8FD2', text: '#212121', textLight: '#737373'}</code></td>
                <td>The colors used in the chat widget. See <a href="#custom-colors">Custom Colors</a> for more details.
                </td>
            </tr>
            <tr>
                <td><code>conversationBeginPosition</code></td>
                <td><code>'top'</code></td>
                <td>The starting position of the conversation in the widget. If set to <code>'top'</code>, the first
                    messages appear on the top of widget. If <code>'bottom'</code>, they appear on the bottom.</td>
            </tr>
            <tr>
                <td><code>font</code></td>
                <td><code>'16px &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif'</code></td>
                <td>(<em>Obsolete</em>) Font for chat widget. Use <code>fontFamily</code> instead.</td>
            </tr>
            <tr>
                <td><code>fontFamily</code></td>
                <td><code>'&quot;Oracle Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif'</code>
                </td>
                <td>Font family used for all text in the chat widget.</td>
            </tr>
            <tr>
                <td><code>height</code></td>
                <td><code>'620px'</code></td>
                <td>The height of the chat widget. Must be set to one of <a
                        href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> values</td>
            </tr>
            <tr>
                <td><code>messagePadding</code></td>
                <td><code>'15px'</code></td>
                <td>Padding around messages in chat widget</td>
            </tr>
            <tr>
                <td><code>position</code></td>
                <td><code>{bottom: '20px', right: '20px'}</code></td>
                <td>A field to specify where to place the chat widget in the browser window. Must be passed as a JSON
                    object</td>
            </tr>
            <tr>
                <td><code>width</code></td>
                <td><code>'375px'</code></td>
                <td>The width of the chat widget. Must be set to one of <a
                        href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> values</td>
            </tr>
        </tbody>
    </table>
    <h3 id="custom-colors">Custom Colors</h3>
    <p>The following colors can be modified to provide a custom look for the widget. The color provided must be a
        hexadecimal color. If a color is not provided, the default is used.</p>
    <table>
        <thead>
            <tr>
                <th>key</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>branding</code></td>
                <td>The primary color for branding the widget. The color is used as the header background, and as hover
                    color on footer buttons.</td>
            </tr>
            <tr>
                <td><code>text</code></td>
                <td>The text color of the messages in the chat widget. Gets overridden if component specific setting is
                    applied.</td>
            </tr>
            <tr>
                <td><code>textLight</code></td>
                <td>The text color of secondary text in messages, e.g., card descriptions in chat widget</td>
            </tr>
            <tr>
                <td><code>headerBackground</code></td>
                <td>The background color of the chat widget's header</td>
            </tr>
            <tr>
                <td><code>headerButtonFill</code></td>
                <td>The SVG fill color of buttons in the chat header</td>
            </tr>
            <tr>
                <td><code>headerText</code></td>
                <td>The color of title in the chat header</td>
            </tr>
            <tr>
                <td><code>conversationBackground</code></td>
                <td>The background of the chat widget's conversation pane. It accepts all values supported by
                    <code>background</code> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background">CSS
                        property</a>, so it can be used to set image backgrounds, gradients, etc. as well.
                </td>
            </tr>
            <tr>
                <td><code>botMessageBackground</code></td>
                <td>The skill message background color</td>
            </tr>
            <tr>
                <td><code>botText</code></td>
                <td>The skill text color. Overrides the <code>text</code> color if passed.</td>
            </tr>
            <tr>
                <td><code>userMessageBackground</code></td>
                <td>The user message background color</td>
            </tr>
            <tr>
                <td><code>userText</code></td>
                <td>The user text color. Overrides the <code>text</code> color if passed.</td>
            </tr>
            <tr>
                <td><code>actionsBackground</code></td>
                <td>The action button background color</td>
            </tr>
            <tr>
                <td><code>actionsBackgroundHover</code></td>
                <td>The action button background color on hover</td>
            </tr>
            <tr>
                <td><code>actionsBackgroundFocus</code></td>
                <td>The action button background color on focus</td>
            </tr>
            <tr>
                <td><code>actionsBorder</code></td>
                <td>The action button border color</td>
            </tr>
            <tr>
                <td><code>actionsText</code></td>
                <td>The action button text color</td>
            </tr>
            <tr>
                <td><code>actionsTextHover</code></td>
                <td>The action button text color on hover</td>
            </tr>
            <tr>
                <td><code>actionsTextFocus</code></td>
                <td>The action button text color on focus</td>
            </tr>
            <tr>
                <td><code>globalActionsBackground</code></td>
                <td>The global action button background color</td>
            </tr>
            <tr>
                <td><code>globalActionsBackgroundHover</code></td>
                <td>The global action button background color on hover</td>
            </tr>
            <tr>
                <td><code>globalActionsBackgroundFocus</code></td>
                <td>The global action button background color on focus</td>
            </tr>
            <tr>
                <td><code>globalActionsBorder</code></td>
                <td>The global action button border color</td>
            </tr>
            <tr>
                <td><code>globalActionsText</code></td>
                <td>The global action button text color</td>
            </tr>
            <tr>
                <td><code>globalActionsTextHover</code></td>
                <td>The global action button text color on hover</td>
            </tr>
            <tr>
                <td><code>globalActionsTextFocus</code></td>
                <td>The global action button text color on focus</td>
            </tr>
            <tr>
                <td><code>cardBackground</code></td>
                <td>The card message's background color</td>
            </tr>
            <tr>
                <td><code>cardNavButton</code></td>
                <td>The card navigation button background color</td>
            </tr>
            <tr>
                <td><code>cardNavButtonHover</code></td>
                <td>The card navigation button background color on hover</td>
            </tr>
            <tr>
                <td><code>cardNavButtonFocus</code></td>
                <td>The card navigation button background color on focus</td>
            </tr>
            <tr>
                <td><code>links</code></td>
                <td>The color of the links that are embedded in messages</td>
            </tr>
            <tr>
                <td><code>timestamp</code></td>
                <td>The color of the timestamp header and the relative timestamp in messages</td>
            </tr>
            <tr>
                <td><code>typingIndicator</code></td>
                <td>The background fill color of the typing indicator</td>
            </tr>
            <tr>
                <td><code>footerBackground</code></td>
                <td>The background color of the chat widget's footer</td>
            </tr>
            <tr>
                <td><code>footerButtonFill</code></td>
                <td>The SVG fill color of the buttons in chat footer</td>
            </tr>
            <tr>
                <td><code>inputBackground</code></td>
                <td>The background color of the message input field</td>
            </tr>
            <tr>
                <td><code>inputText</code></td>
                <td>The text color in the message input field. Overrides <code>text</code> if passed.</td>
            </tr>
            <tr>
                <td><code>recognitionViewBackground</code></td>
                <td>The background color of the recognition text view, which is displayed in voice mode. If absent, the
                    header background color is used.</td>
            </tr>
            <tr>
                <td><code>recognitionViewText</code></td>
                <td>The text color in recognition text view displayed in voice mode. If absent, text color is used.</td>
            </tr>
            <tr>
                <td><code>recognitionViewButtonFill</code></td>
                <td>The SVG fill color of the mode toggle color in voice mode</td>
            </tr>
            <tr>
                <td><code>visualizerContainerBackground</code></td>
                <td>The background color of the visualizer container displayed in voice mode. If absent, user message
                    background color is used.</td>
            </tr>
            <tr>
                <td><code>visualizer</code></td>
                <td>The color used in bars of the visualizer graph. If absent, branding color is used.</td>
            </tr>
            <tr>
                <td><code>notificationBadgeBackground</code></td>
                <td>The background color of the message notification badge</td>
            </tr>
            <tr>
                <td><code>notificationBadgeText</code></td>
                <td>The text color of message count in notification badge</td>
            </tr>
        </tbody>
    </table>
    <p>Here's an example of providing a custom color.</p>
    <pre><code class="language-js"><div>colors: {
<span class="hljs-attr">branding</span>: <span class="hljs-string">&#x27;#e00&#x27;</span>,
<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;#545454&#x27;</span>
}
</div></code></pre>
    <p>The branding and text color will be modified in above example. Default color is used for secondary text color.
    </p>
    <h3 id="custom-icons">Custom Icons</h3>
    <p>The icons used in the widget can be customized in two ways - the URL of the image asset, or an SVG string. For
        the icons that support SVG strings, you can pass the raw SVG data which the widget renders as an inline SVG. SVG
        strings allow for the faster loading of an image, the ability to animate it, or for changing its color. The
        theme color is applied to SVG strings for attachment, send, and mic buttons, but not other image assets.</p>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>SVG String Compatible</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>botButtonIcon</code></td>
                <td>No</td>
                <td>The chat bot button that's displayed as the minimized chat button</td>
            </tr>
            <tr>
                <td><code>logoIcon</code></td>
                <td>No</td>
                <td>The chat logo icon that's displayed at the header of the chat widget</td>
            </tr>
            <tr>
                <td><code>agentAvatar</code></td>
                <td>No</td>
                <td>The Avatar icon that's displayed alongside the response messages coming from a live agent. If not
                    provided, and <code>botIcon</code> is provided, then the <code>botIcon</code> is displayed. If
                    neither <code>agentAvatar</code> or <code>botIcon</code> are provided, then no icon is displayed.
                </td>
            </tr>
            <tr>
                <td><code>botIcon</code></td>
                <td>No</td>
                <td>the icon alongside skill response messages. If not provided, no icon is displayed.</td>
            </tr>
            <tr>
                <td><code>personIcon</code></td>
                <td>No</td>
                <td>The icon that displays alongside user messages. If not provided, no icon is displayed</td>
            </tr>
            <tr>
                <td><code>chatBubbleIcon</code></td>
                <td>The loading chat bubble icon</td>
                <td></td>
            </tr>
            <tr>
                <td><code>clearMessageIcon</code></td>
                <td>The clear message button icon at widget header</td>
                <td></td>
            </tr>
            <tr>
                <td><code>audioResponseOffIcon</code></td>
                <td>The icon of toggle button when audio responses are turned off</td>
                <td></td>
            </tr>
            <tr>
                <td><code>audioResponseOnIcon</code></td>
                <td>The icon of toggle button when audio responses are turned on</td>
                <td></td>
            </tr>
            <tr>
                <td><code>closeIcon</code></td>
                <td>The icon for the button to minimize chat widget at widget header</td>
                <td></td>
            </tr>
            <tr>
                <td><code>attachmentIcon</code></td>
                <td>The attachment upload button icon</td>
                <td></td>
            </tr>
            <tr>
                <td><code>sendIcon</code></td>
                <td>The send message button icon</td>
                <td></td>
            </tr>
            <tr>
                <td><code>keyboardIcon</code></td>
                <td>The keyboard icon, displayed in button to switch from voice to keyboard mode</td>
                <td></td>
            </tr>
            <tr>
                <td><code>micIcon</code></td>
                <td>The mic icon, displayed in button to switch from keyboard to voice mode</td>
                <td></td>
            </tr>
            <tr>
                <td><code>audioIcon</code></td>
                <td>No</td>
                <td>The audio attachment icon, displayed when attachment source URL is not reachable</td>
            </tr>
            <tr>
                <td><code>fileIcon</code></td>
                <td>No</td>
                <td>The file attachment icon</td>
            </tr>
            <tr>
                <td><code>imageIcon</code></td>
                <td>No</td>
                <td>The image attachment icon, displayed when attachment source URL is not reachable</td>
            </tr>
            <tr>
                <td><code>videoIcon</code></td>
                <td>No</td>
                <td>The video attachment icon, displayed when attachment source URL is not reachable</td>
            </tr>
            <tr>
                <td><code>errorIcon</code></td>
                <td>No</td>
                <td>The error icon. Displayed with error messages or information</td>
            </tr>
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>Property name</th>
                <th>Optional</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>chatBubbleIconHeight</code></td>
                <td><code>'42px'</code></td>
                <td>Height of loading chat bubble icon</td>
                <td></td>
            </tr>
            <tr>
                <td><code>chatBubbleIconWidth</code></td>
                <td><code>'56px'</code></td>
                <td>Width of loading chat bubble icon</td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <p>Here's an example of providing custom icons:</p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> chatSettings = {
...,
<span class="hljs-attr">clearMessageIcon</span>: <span class="hljs-string">&#x27;https://cdn4.iconfinder.com/data/icons/kids-2/128/kids_kid_boy-32.png&#x27;</span>,
<span class="hljs-attr">micIcon</span>: <span class="hljs-string">&#x27;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;24&quot;&gt;&lt;path d=&quot;M0 0h24v24H0z&quot; fill=&quot;none&quot; opacity=&quot;.1&quot;/&gt;&lt;path d=&quot;M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z&quot;/&gt;&lt;/svg&gt;&#x27;</span>
};
</div></code></pre>
    <h3 id="custom-text">Custom Text</h3>
    <p>The following strings can be customized to provide localized text. The strings must be provided under a valid <a
            href="https://www.science.co.il/language/Locale-codes.php">language string</a> e.g. 'en-us', 'es', 'fr',
        'zh-cn'.</p>
    <table>
        <thead>
            <tr>
                <th>key</th>
                <th>Default Value</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>attachmentAudioFallback</code></td>
                <td><code>'Your browser does not support embedded audio. However you can {0}download it{/0}.'</code>
                </td>
                <td>The fallback message that is displayed in place of an audio attachment if the audio can not be
                    rendered by the client. The text between <code>{0}</code> and <code>{/0}</code> is set to a link to
                    download the file.</td>
            </tr>
            <tr>
                <td><code>attachmentVideoFallback</code></td>
                <td><code>'Your browser does not support embedded video. However you can {0}download it{/0}.'</code>
                </td>
                <td>The fallback message that's displayed in place of an video attachment if the video can not be
                    rendered by the client. The text between <code>{0}</code> and <code>{/0}</code> is set to a link to
                    download the file.</td>
            </tr>
            <tr>
                <td><code>audioResponseOff</code></td>
                <td><code>'Turn audio response on'</code></td>
                <td>The tooltip that appears when hovering over the audio utterance on button in header.</td>
            </tr>
            <tr>
                <td><code>audioResponseOn</code></td>
                <td><code>'Turn audio response off'</code></td>
                <td>The tooltip that appears when hovering over the audio utterance off button in header.</td>
            </tr>
            <tr>
                <td><code>card</code></td>
                <td><code>'Card'</code></td>
                <td>CRC Card identifier.</td>
            </tr>
            <tr>
                <td><code>cardImagePlaceholder</code></td>
                <td><code>'Card image'</code></td>
                <td>The text placeholder that's displayed while the card image is fetched and loaded.</td>
            </tr>
            <tr>
                <td><code>cardNavNext</code></td>
                <td><code>'Next card'</code></td>
                <td>The card navigation button label that displays the next card in horizontal layout.</td>
            </tr>
            <tr>
                <td><code>cardNavPrevious</code></td>
                <td><code>'Previous card'</code></td>
                <td>The card navigation button label that displays the previous card in horizontal layout.</td>
            </tr>
            <tr>
                <td><code>chatTitle</code></td>
                <td><code>'Chat'</code></td>
                <td>Title of the chat widget that is displayed on the header.</td>
            </tr>
            <tr>
                <td><code>chatSubtitle</code></td>
                <td></td>
                <td>The subtitle of the chat widget that's displayed on the header below the title. If
                    <code>showConnectionStatus</code> is set to <code>true</code>, and the subtitle is set as well, then
                    the subtitle displays in place of the connection status.
                </td>
            </tr>
            <tr>
                <td><code>clear</code></td>
                <td><code>'Clear conversation'</code></td>
                <td>The tooltip that appears when hovering over clear messages button in header.</td>
            </tr>
            <tr>
                <td><code>close</code></td>
                <td><code>'Close widget'</code></td>
                <td>The tooltip that appears when hovering over close widget button in header.</td>
            </tr>
            <tr>
                <td><code>closing</code></td>
                <td><code>'Closing'</code></td>
                <td>The status text when the connection between the chat widget and the server is closing.</td>
            </tr>
            <tr>
                <td><code>connected</code></td>
                <td><code>'Connected'</code></td>
                <td>The status text when the connection between the chat widget and the server is established.</td>
            </tr>
            <tr>
                <td><code>connecting</code></td>
                <td><code>'Connecting'</code></td>
                <td>The status text when the connection between the chat widget and the server is connecting.</td>
            </tr>
            <tr>
                <td><code>disconnected</code></td>
                <td><code>'Disconnected'</code></td>
                <td>The status text when the connection between the chat widget and the server is closed.</td>
            </tr>
            <tr>
                <td><code>errorSpeechInvalidUrl</code></td>
                <td><code>'Speech server URL not set. Can\'t start recording.'</code></td>
                <td>The error message that is displayed when the voice server URL is invalid or not set.</td>
            </tr>
            <tr>
                <td><code>errorSpeechMultipleConnection</code></td>
                <td><code>'A voice recognition connection is live. Can\'t start another connection.'</code></td>
                <td>The error message that's displayed when the user attempts a new voice message while another
                    recognition is ongoing. This usually happens when multiple voice connections are attempted in short
                    interval by repeatedly toggling between keyboard and voice mode.</td>
            </tr>
            <tr>
                <td><code>errorSpeechTooMuchTimeout</code></td>
                <td><code>'Too much voice input to recognize. Can\'t generate recognized text.'</code></td>
                <td>The error message that's displayed when the user provides a voice message that can't be recognized
                    because it's too long.</td>
            </tr>
            <tr>
                <td><code>errorSpeechUnavailable</code></td>
                <td><code>'Microphone is not accessible in this browser. Can't start recording.'</code></td>
                <td>The error message that's displayed when the browser does not provide any API to access the
                    microphone.</td>
            </tr>
            <tr>
                <td><code>errorSpeechUnsupportedLocale</code></td>
                <td><code>'The set speech locale is not supported. Can\'t start recording.'</code></td>
                <td>The error message that's displayed when an unsupported speech locale is configured for voice
                    recognition and a recording is attempted.</td>
            </tr>
            <tr>
                <td><code>inputPlaceholder</code></td>
                <td><code>'Type a message'</code></td>
                <td>The placeholder text that appears in the user input field in keyboard mode.</td>
            </tr>
            <tr>
                <td><code>noSpeechTimeout</code></td>
                <td><code>'Could not detect the voice, no message sent.'</code></td>
                <td>The status text that's displayed when the server is unable to recognize the voice.</td>
            </tr>
            <tr>
                <td><code>language_detect</code></td>
                <td><code>'Detect Language'</code></td>
                <td>The label for auto-detect option in language selection dropdown.</td>
            </tr>
            <tr>
                <td><code>language_&lt;languageTag&gt;</code></td>
                <td><em><code>Language Label</code></em></td>
                <td>The label for the language represented by the <code>languageTag</code>, e.g. 'English' for 'en' in
                    the language selection dropdown available when <a href="#multi-lingual-chat">Multi-Lingual Chat</a>
                    is configured.</td>
            </tr>
            <tr>
                <td><code>openMap</code></td>
                <td><code>'Open Map'</code></td>
                <td>Label of the action button to open a location map.</td>
            </tr>
            <tr>
                <td><code>previousChats</code></td>
                <td><code>'Previous conversations'</code></td>
                <td>The status text that's displayed at the end of older messages.</td>
            </tr>
            <tr>
                <td><code>recognitionTextPlaceholder</code></td>
                <td><code>'Speak your message'</code></td>
                <td>Placeholder text that appears in recognition text field in voice mode.</td>
            </tr>
            <tr>
                <td><code>requestLocation</code></td>
                <td><code>'Requesting location'</code></td>
                <td>Text that is displayed while user location is requested on browser.</td>
            </tr>
            <tr>
                <td><code>requestLocationDeniedPermission</code></td>
                <td><code>'Location permission denied. Please allow access to share your location, or else type in your location.'</code>
                </td>
                <td>The error message that's displayed when permission to access location is denied.</td>
            </tr>
            <tr>
                <td><code>requestLocationDeniedTimeout</code></td>
                <td><code>'Taking too long to get your current location. Please try again, or else type in your location.'</code>
                </td>
                <td>The error message that's displayed when location request is not resolved due to a timeout.</td>
            </tr>
            <tr>
                <td><code>requestLocationDeniedUnavailable</code></td>
                <td><code>'Your current location is unavailable. Please try again, or else type in your location.'</code>
                </td>
                <td>The error message that is displayed when location request is denied due to unavailability of current
                    location in client's device.</td>
            </tr>
            <tr>
                <td><code>retryMessage</code></td>
                <td><code>'Try again'</code></td>
                <td>Text that is displayed when user message is not sent to server.</td>
            </tr>
            <tr>
                <td><code>send</code></td>
                <td><code>'Send message'</code></td>
                <td>Tooltip that appears when hovering over send button in footer.</td>
            </tr>
            <tr>
                <td><code>shareAudio</code></td>
                <td><code>'Share Audio'</code></td>
                <td>The menu item text for sharing an audio file in the share popup.</td>
            </tr>
            <tr>
                <td><code>shareFile</code></td>
                <td><code>'Share File'</code></td>
                <td>The menu item text for sharing a generic file in the share popup.</td>
            </tr>
            <tr>
                <td><code>shareLocation</code></td>
                <td><code>'Share Location'</code></td>
                <td>The menu item text for sharing a location in the share popup.</td>
            </tr>
            <tr>
                <td><code>shareVisual</code></td>
                <td><code>'Share Image/Video'</code></td>
                <td>The menu item text for sharing an image or video file in the share popup.</td>
            </tr>
            <tr>
                <td><code>shareFailureMessage</code></td>
                <td><code>'Sorry, sharing is not available on this device.'</code></td>
                <td>The error message that's shown when a user clicks on a share action button and the share API is not
                    supported by the device.</td>
            </tr>
            <tr>
                <td><code>skillMessage</code></td>
                <td><code>'Skill says'</code></td>
                <td>The skill message indicator for screen readers. It is spoken by the screen readers before the skill
                    responses.</td>
            </tr>
            <tr>
                <td><code>speak</code></td>
                <td><code>'Speak a message'</code></td>
                <td>The tooltip that appears when hovering over speak button in footer.</td>
            </tr>
            <tr>
                <td><code>relTimeNow</code></td>
                <td><code>'Now'</code></td>
                <td>The relative timestamp that's shown right after a new message</td>
            </tr>
            <tr>
                <td><code>relTimeMoment</code></td>
                <td><code>'A few seconds ago'</code></td>
                <td>The relative timestamp that displays ten seconds after the message has been received and before 60
                    seconds has elapsed since the last message was received.</td>
            </tr>
            <tr>
                <td><code>relTimeMin</code></td>
                <td><code>'{0}min ago'</code></td>
                <td>The relative timestamp that's shown for every minute since last message. The text {0} is replaced by
                    the number of minutes passed .</td>
            </tr>
            <tr>
                <td><code>relTimeHr</code></td>
                <td><code>'{0}hr ago'</code></td>
                <td>The relative timestamp shown for each hour since the last message. The text {0} is replaced by the
                    number of hours passed.</td>
            </tr>
            <tr>
                <td><code>relTimeDay</code></td>
                <td><code>'{0}d ago'</code></td>
                <td>The relative timestamp that's shown each day since last message. The text {0} is replaced by the
                    number of days passed.</td>
            </tr>
            <tr>
                <td><code>relTimeMon</code></td>
                <td><code>'{0}mth ago'</code></td>
                <td>The relative timestamp shown for each month since the last message. The text {0} is replaced by the
                    number of months passed.</td>
            </tr>
            <tr>
                <td><code>relTimeYr</code></td>
                <td><code>'{0}yr ago'</code></td>
                <td>The relative timestamp shown for every year since last message. The text {0} is replaced by the
                    number of years passed.</td>
            </tr>
            <tr>
                <td><code>typingIndicator</code></td>
                <td><code>'Waiting for response'</code></td>
                <td>The accessibility text for the typing indicator. It is spoken by the screen readers.</td>
            </tr>
            <tr>
                <td><code>upload</code></td>
                <td><code>'Share popup'</code></td>
                <td>The tooltip that appears when hovering over upload share popup button in footer.</td>
            </tr>
            <tr>
                <td><code>uploadFailed</code></td>
                <td><code>'Upload Failed.'</code></td>
                <td>The error text for an upload failure.</td>
            </tr>
            <tr>
                <td><code>uploadFileSizeLimitExceeded</code></td>
                <td><code>'Upload Failed. File size should not be more than {0}MB.'</code></td>
                <td>The error text that's displayed when upload file size is too large. The text {0} is replaced by the
                    SDK to the maximum allowed file size, which defaults to 25MB.</td>
            </tr>
            <tr>
                <td><code>uploadFileSizeZeroByte</code></td>
                <td><code>'Upload Failed. Files of size zero bytes can\'t be uploaded.'</code></td>
                <td>The error text that's displayed when the upload file size is 0 bytes.</td>
            </tr>
            <tr>
                <td><code>uploadUnsupportedFileType</code></td>
                <td><code>'Upload Failed. Unsupported file type.'</code></td>
                <td>The error text that's displayed when an unsupported file type upload is attempted.</td>
            </tr>
            <tr>
                <td><code>userMessage</code></td>
                <td><code>'I say'</code></td>
                <td>The user message indicator for screen readers. It is spoken by the screen readers before the user
                    messages.</td>
            </tr>
            <tr>
                <td><code>utteranceGeneric</code></td>
                <td><code>'Message from skill.'</code></td>
                <td>The fallback description of a response message for an utterance that was not parsed by the SDK.</td>
            </tr>
            <tr>
                <td><code>webViewAccessibilityTitle</code></td>
                <td><code>'In-widget WebView to display links'</code></td>
                <td>The default accessibility title for the WebView which is read out by screen readers</td>
            </tr>
            <tr>
                <td><code>webViewClose</code></td>
                <td><code>'Done'</code></td>
                <td>The default label/tooltip title for WebView close button</td>
            </tr>
            <tr>
                <td><code>webViewErrorInfoDismiss</code></td>
                <td><code>'Dismiss'</code></td>
                <td>The tooltip for the dismiss button in the fallback Snackbar inside WebView to close it</td>
            </tr>
            <tr>
                <td><code>webViewErrorInfoText</code></td>
                <td><code>'Don’t see the page? {0}Click here{/0} to open it in a browser.'</code></td>
                <td>The informational text displayed in a Snackbar inside WebView as a fallback for the user in case the
                    URL fails to load in the WebView. The text between {0} and {/0} is set to the original link that
                    opens in a new tab or window.</td>
            </tr>
        </tbody>
    </table>
    <p>Here's an example of providing custom text in a few locales.</p>
    <pre><code class="language-js"><div>i18n: {
<span class="hljs-attr">fr</span>: {
    <span class="hljs-attr">chatTitle</span>: <span class="hljs-string">&#x27;Soutien&#x27;</span>
},
<span class="hljs-attr">en</span>: {
    <span class="hljs-attr">chatTitle</span>: <span class="hljs-string">&#x27;Support&#x27;</span>
},
<span class="hljs-attr">es</span>: {
    <span class="hljs-attr">chatTitle</span>: <span class="hljs-string">&#x27;Apoyo&#x27;</span>
},
<span class="hljs-string">&#x27;zh-cn&#x27;</span>: {
    <span class="hljs-attr">chatTitle</span>: <span class="hljs-string">&#x27;支持&#x27;</span>
}
}
</div></code></pre>
    <p>If custom strings are provided for any locale other than 'en', all keys must be specified for that locale,
        otherwise 'en' translations are displayed for the missing values.</p>
    <p>The settings can be configured as provided in the example below:</p>
    <pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> chatSettings = {
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;Chat server URI&gt;&#x27;</span>,
<span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;&lt;Channel ID&gt;&#x27;</span>,
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;&lt;User ID&gt;&#x27;</span>,
<span class="hljs-attr">fontFamily</span>: <span class="hljs-string">&#x27;&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif&#x27;</span>,
<span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en&#x27;</span>,
<span class="hljs-attr">enableClearMessage</span>: <span class="hljs-literal">true</span>,
<span class="hljs-attr">botButtonIcon</span> : <span class="hljs-string">&#x27;style/Robot.png&#x27;</span>,
<span class="hljs-attr">botIcon</span>: <span class="hljs-string">&#x27;style/Robot.png&#x27;</span>,
<span class="hljs-attr">personIcon</span>: <span class="hljs-string">&#x27;style/userIcon.png&#x27;</span>
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initSDK</span>(<span class="hljs-params">name</span>) </span>{
<span class="hljs-comment">// If WebSDK is not available, reattempt later</span>
<span class="hljs-keyword">if</span> (!WebSDK) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        initSDK(name);
    }, <span class="hljs-number">2000</span>);
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// Default name is Bots</span>
<span class="hljs-keyword">if</span> (!name) {
    name = <span class="hljs-string">&#x27;Bots&#x27;</span>;
}

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK(chatSettings);    <span class="hljs-comment">// Initiate library with configuration</span>

    <span class="hljs-comment">// Add ready listener before calling connect()</span>
    <span class="hljs-comment">// It is preferable to add other listeners before calling connect() too</span>
    Bots.on(<span class="hljs-string">&#x27;ready&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The widget is ready&#x27;</span>);
    });

    Bots.connect();     <span class="hljs-comment">// Connect to server</span>

    <span class="hljs-built_in">window</span>[name] = Bots;
}, <span class="hljs-number">0</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;WebSDK URL&gt;&quot;</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;initSDK(&#x27;&lt;WebSDK namespace&gt;&#x27;)&quot;</span>&gt;</span>
</div></code></pre>
    <h3 id="customizing-css-classes">Customizing CSS Classes</h3>
    <p>To further customize the look of the chat widget, its CSS classes can be overridden with custom style rules. Some
        main classes are as follows:</p>
    <table>
        <thead>
            <tr>
                <th>class</th>
                <th>Component</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>oda-chat-wrapper</td>
                <td>Wrapper for entire chat widget</td>
            </tr>
            <tr>
                <td>oda-chat-button</td>
                <td>Collapsed chat widget button</td>
            </tr>
            <tr>
                <td>oda-chat-notification-badge</td>
                <td>Unseen message notification badge</td>
            </tr>
            <tr>
                <td>oda-chat-widget</td>
                <td>Expanded chat widget; wraps the widget header, conversation, and footer</td>
            </tr>
            <tr>
                <td>oda-chat-header</td>
                <td>Chat widget header</td>
            </tr>
            <tr>
                <td>oda-chat-logo</td>
                <td>Logo on the widget header</td>
            </tr>
            <tr>
                <td>oda-chat-title</td>
                <td>Title on the widget header</td>
            </tr>
            <tr>
                <td>oda-chat-connection-status</td>
                <td>Connection status. Each connection value has its own class as well - oda-chat-connected,
                    oda-chat-disconnected etc.</td>
            </tr>
            <tr>
                <td>oda-chat-connected</td>
                <td>Applied as a sibling to connection-status when the widget is connected to server</td>
            </tr>
            <tr>
                <td>oda-chat-connecting</td>
                <td>Applied as a sibling to connection-status when the widget is connecting to server</td>
            </tr>
            <tr>
                <td>oda-chat-disconnected</td>
                <td>Applied as a sibling to connection-status when the widget is disconnected from server</td>
            </tr>
            <tr>
                <td>oda-chat-closing</td>
                <td>Applied as a sibling to connection-status when the widget is disconnecting from server</td>
            </tr>
            <tr>
                <td>oda-chat-header-button</td>
                <td>Common class for all header buttons</td>
            </tr>
            <tr>
                <td>oda-chat-button-clear</td>
                <td>Clear messages button</td>
            </tr>
            <tr>
                <td>oda-chat-button-narration</td>
                <td>Skill audio response toggle button</td>
            </tr>
            <tr>
                <td>oda-chat-button-close</td>
                <td>Close widget button</td>
            </tr>
            <tr>
                <td>oda-chat-conversation</td>
                <td>Container for the conversation</td>
            </tr>
            <tr>
                <td>oda-chat-message</td>
                <td>Common wrapper class for all chat messages</td>
            </tr>
            <tr>
                <td>oda-chat-left</td>
                <td>Skill message wrapper</td>
            </tr>
            <tr>
                <td>oda-chat-right</td>
                <td>User message wrapper</td>
            </tr>
            <tr>
                <td>oda-chat-icon-wrapper</td>
                <td>Skill/person icon wrapper displayed alongside message</td>
            </tr>
            <tr>
                <td>oda-chat-message-icon</td>
                <td>Skill/person icon image displayed alongside message</td>
            </tr>
            <tr>
                <td>oda-chat-message-bubble</td>
                <td>Message bubble</td>
            </tr>
            <tr>
                <td>oda-chat-message-actions</td>
                <td>Action buttons wrapper</td>
            </tr>
            <tr>
                <td>oda-chat-message-global-actions</td>
                <td>Global action buttons wrapper</td>
            </tr>
            <tr>
                <td>oda-chat-action-postback</td>
                <td>Postback action button</td>
            </tr>
            <tr>
                <td>oda-chat-action-location</td>
                <td>Location request action button</td>
            </tr>
            <tr>
                <td>oda-chat-card</td>
                <td>Card message</td>
            </tr>
            <tr>
                <td>oda-chat-footer</td>
                <td>Chat widget footer</td>
            </tr>
            <tr>
                <td>oda-chat-footer-button</td>
                <td>Common class for all footer buttons</td>
            </tr>
            <tr>
                <td>oda-chat-button-upload</td>
                <td>Upload file button</td>
            </tr>
            <tr>
                <td>oda-chat-button-send</td>
                <td>Send message button</td>
            </tr>
            <tr>
                <td>oda-chat-user-input</td>
                <td>User input textarea</td>
            </tr>
        </tbody>
    </table>
    <h2 id="enums">Enums</h2>
    <p>The <code>WebSDK</code> object exposes various enums for the settings that support specific values. Once the
        library has been loaded, these enum values can be used to configure or update the SDK. The enums are:</p>
    <h3 id="websdkevent">WebSDK.EVENT</h3>
    <p>This enum provides the event values that can be subscribed for using <code>Bots.on</code> method. The enum values
        are:</p>
    <ul>
        <li>CHAT_LANG - 'chatlanguagechange'</li>
        <li>CLICK_AUDIO_RESPONSE_TOGGLE - 'click:audiotoggle'</li>
        <li>CLICK_ERASE - 'click:erase'</li>
        <li>CLICK_VOICE_TOGGLE - 'click:voicetoggle'</li>
        <li>DESTROY - 'destroy'</li>
        <li>MESSAGE - 'message'</li>
        <li>MESSAGE_RECEIVED - 'message:received'</li>
        <li>MESSAGE_SENT - 'message:sent'</li>
        <li>NETWORK - 'networkstatuschange'</li>
        <li>READY - 'ready'</li>
        <li>TYPING - 'typing'</li>
        <li>UNREAD - 'unreadCount'</li>
        <li>WIDGET_CLOSED - 'widget:closed'</li>
        <li>WIDGET_OPENED - 'widget:opened'</li>
    </ul>
    <p>The enum values can be passed to add a listener to the corresponding event, e.g.
        Bots.on(WebSDK.EVENT.MESSAGE_SENT, function() {}) to listen for sent messages. For details about each event, see
        <a href="#events">Events</a>.
    </p>
    <h3 id="websdkspeech_locale">WebSDK.SPEECH_LOCALE</h3>
    <p>This enum provides the locales that are supported by the voice recognition service. The enum values are:</p>
    <ul>
        <li>DE_DE - 'de-de' - German</li>
        <li>EN_AU - 'en-au' - English (Australian)</li>
        <li>EN_GB - 'en-gb' - English (UK)</li>
        <li>EN_US - 'en-us' - English (US)</li>
        <li>ES_ES - 'es-es' - Spanish</li>
        <li>FR_FR - 'fr-fr' - French</li>
        <li>IT_IT - 'it-it' - Italian</li>
        <li>PT_BR - 'pt-br' - Portuguese (Brazilian)</li>
    </ul>
    <p>The enum values can be passed in <code>speechLocale</code> setting, or <code>setSpeechLocale()</code> API.</p>
    <h3 id="websdktheme">WebSDK.THEME</h3>
    <p>This enum provides the themes that can be applied to the chat widget. The values are:</p>
    <ul>
        <li>DEFAULT - 'default' - The default theme, provides contrast ratio between background layout and foreground
            text colors to meet <a href="https://www.w3.org/TR/WCAG21/">WCAG 2.1</a> AAA requirements.</li>
        <li>REDWOOD_DARK - 'redwood-dark' - Redwood dark theme, provides contrast ratio between background layout and
            foreground text colors to meet WCAG 2.1 AA requirements.</li>
        <li>CLASSIC - 'classic' - The classic theme that used for prior versions of the widget. This theme does not meet
            the minimum color contrast between the background layout and foreground text colors as required by WCAG 2.1.
        </li>
    </ul>
    <h2 id="methods">Methods</h2>
    <p>The name that's passed in the <code>initSDK</code> parameter (WebSDK Namespace) will be used to invoke the SDK's
        public APIs. For example, if the name is set as <code>'Bots'</code>, the APIs can be invoked with
        <code>Bots.&lt;API&gt;()</code>.
    </p>
    <h3 id="connect">connect()</h3>
    <p>Connects to current chat server.</p>
    <pre><code class="language-js"><div>Bots.connect()
</div></code></pre>
    <p>The API returns a promise which can be used to execute code after connection is complete or closed.</p>
    <pre><code class="language-js"><div>Bots.connect()
.then(
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// Successful connection</span>
    },
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
        <span class="hljs-comment">// Something went wrong during connection</span>
    }
)
</div></code></pre>
    <h3 id="connectconfig">connect(config)</h3>
    <p>Connects to current chat server with passed parameters. All fields are optional, if a field is not passed and is
        already set from initial settings or an earlier invocation, the existing value is reused. If <code>userId</code>
        is not passed and is not set so far, a random userId is generated and used.</p>
    <pre><code class="language-js"><div>Bots.connect({
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;URI&gt;&#x27;</span>,
<span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;&lt;channelId&gt;&#x27;</span>,
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;&lt;userId&gt;&#x27;</span>
})
</div></code></pre>
    <p>The API returns a Promise which can be used to execute code after connection is complete or closed.</p>
    <pre><code class="language-js"><div>Bots.connect({
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;&lt;URI&gt;&#x27;</span>
<span class="hljs-attr">channelId</span>: <span class="hljs-string">&#x27;&lt;channelId&gt;&#x27;</span>,
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;&lt;userId&gt;&#x27;</span>})
.then(
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// Successful connection</span>
    },
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
        <span class="hljs-comment">// Something went wrong during connection</span>
    }
)
</div></code></pre>
    <p>The call to <code>connect()</code> API can result in a new connection or continuing existing connection depending
        on a few factors:</p>
    <ul>
        <li>On calling <code>connect()</code> with no parameters during no active connection, a new connection is
            initiated using the existing settings. For client auth enabled mode, a new token is fetched to open the
            connection.</li>
        <li>On calling <code>connect(param)</code> with parameters during no active connection, a new connection is
            initiated using the passed parameters. For client auth enabled mode, parameters other than <code>URI</code>
            are ignored, as the <code>channelId</code> and <code>userId</code> is parsed from the token.</li>
        <li>On calling <code>connect()</code> with no parameters during an active connection, the current connection is
            continued, and the returned Promise is immediately resolved.</li>
        <li>On calling <code>connect(params)</code> with parameters during an active connection in client auth disabled
            mode, if the passed parameters are same as existing parameters, the current connection is continued.</li>
        <li>On calling <code>connect(params)</code> with parameters during an active connection in client auth disabled
            mode, if the passed parameters are different from existing parameters, the current connection is closed and
            a new connection is initiated with passed parameters.</li>
        <li>On calling <code>connect(params)</code> with parameters during an active connection in client auth enabled
            mode, the current connection is closed and a new connection is initiated with a new token only if a new
            <code>URI</code> is passed in parameters. Otherwise, the current connection is continued.
        </li>
    </ul>
    <h3 id="disconnect">disconnect()</h3>
    <p>Closes currently active connection to the chat server. This includes the closing the connection to the chat
        server, any active voice recognition, ongoing attachment uploads, and running speech synthesis.</p>
    <pre><code class="language-js"><div>Bots.disconnect()
</div></code></pre>
    <p>The API returns a <code>Promise</code> which is resolved when the connection is closed.</p>
    <pre><code class="language-js"><div>Bots.disconnect()
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The connection is now closed&#x27;</span>);
});
</div></code></pre>
    <h3 id="isconnected">isConnected()</h3>
    <p>Returns whether the connection to the chat server is currently active.</p>
    <pre><code class="language-js"><div>Bots.isConnected()
</div></code></pre>
    <h3 id="openchat">openChat()</h3>
    <p>Opens the chat widget popup.</p>
    <pre><code class="language-js"><div>Bots.openChat();
</div></code></pre>
    <h3 id="closechat">closeChat()</h3>
    <p>Collapses the chat widget and displays the chat icon.</p>
    <pre><code class="language-js"><div>Bots.closeChat();
</div></code></pre>
    <h3 id="ischatopened">isChatOpened()</h3>
    <p>Returns true if the widget is open, otherwise false.</p>
    <pre><code class="language-js"><div>Bots.isChatOpened();
</div></code></pre>
    <h3 id="destroy">destroy()</h3>
    <p>Destroys the SDK instance by closing any active connection, voice recognition, speech synthesis, file uploads,
        and by removing the widget from the UI. Once called, none of the current instance methods can be called
        afterwards.</p>
    <pre><code class="language-js"><div>Bots.destroy();
</div></code></pre>
    <h3 id="sendattachmentfile">sendAttachment(file)</h3>
    <p>Uploads file to the server. Returns a Promise that is resolved with the server response for successful uploads,
        or gets rejected with an error message for unsuccessful uploads.</p>
    <pre><code class="language-js"><div>Bots.sendAttachment(file)
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;File uploaded successfully.&#x27;</span>);
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
    <span class="hljs-built_in">console</span>.log(reason);
});
</div></code></pre>
    <h3 id="sendmessagemessage-flags">sendMessage(message, flags)</h3>
    <p>Sends a message on user’s behalf. Returns a Boolean to indicate whether the message was sent.</p>
    <pre><code class="language-js"><div>Bots.sendMessage({
<span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;text&#x27;</span>,
<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;hello&#x27;</span>
});
<span class="hljs-comment">// OR</span>
Bots.sendMessage(<span class="hljs-string">&#x27;hello&#x27;</span>);
</div></code></pre>
    <p>The messages can be sent in three formats:</p>
    <ul>
        <li>passing text string</li>
    </ul>
    <pre><code class="language-js"><div>Bots.sendMessage(<span class="hljs-string">&#x27;Show my payslip&#x27;</span>)
</div></code></pre>
    <p>You can also pass a location coordinates in a similar fashion:</p>
    <pre><code class="language-js"><div>Bots.sendMessage(<span class="hljs-string">&#x27;32.323232, 143.434343&#x27;</span>)   <span class="hljs-comment">// Latitude, longitude</span>
</div></code></pre>
    <ul>
        <li>passing messagePayload of message</li>
    </ul>
    <pre><code class="language-js"><div>Bots.sendMessage({
<span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;text&#x27;</span>,
<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Show menu&#x27;</span>
})

Bots.sendMessage({
<span class="hljs-attr">postback</span>: {
    <span class="hljs-attr">variables</span>: {},
    <span class="hljs-string">&#x27;system.botId&#x27;</span>: <span class="hljs-string">&#x27;5409672A-AB06-4109-8303-318F5EDE91AA&#x27;</span>,
    <span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;pizza&#x27;</span>,
    <span class="hljs-string">&#x27;system.state&#x27;</span>: <span class="hljs-string">&#x27;ShowMenu&#x27;</span>
},
<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Order Pizza&#x27;</span>,
<span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;postback&#x27;</span>
})
</div></code></pre>
    <ul>
        <li>passing entire message</li>
    </ul>
    <pre><code class="language-js"><div>Bots.sendMessage({
<span class="hljs-attr">messagePayload</span>: {
    <span class="hljs-attr">postback</span>: {
        <span class="hljs-attr">variables</span>: {},
        system.botId: <span class="hljs-string">&#x27;5409672A-AB06-4109-8303-318F5EDE91AA&#x27;</span>,
        <span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;pizza&#x27;</span>,
        <span class="hljs-string">&#x27;system.state&#x27;</span>: <span class="hljs-string">&#x27;ShowMenu&#x27;</span>
    },
    <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Order Pizza&#x27;</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;postback&#x27;</span>
},
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;Guest&#x27;</span>
})
</div></code></pre>
    <p>To keep the message from being displayed in the widget, pass the <code>hidden</code> Boolean flag in the flags
        object.</p>
    <pre><code class="language-js"><div>Bots.sendMessage(<span class="hljs-string">&#x27;What is the menu today?&#x27;</span>, { <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> });
</div></code></pre>
    <p>The above call will send the message to server without displaying it in the widget.</p>
    <h3 id="updateuseruserdetails">updateUser(userDetails)</h3>
    <p>Updates the user information.</p>
    <pre><code class="language-js"><div>Bots.updateUser({
<span class="hljs-attr">messagePayload</span>: {
    <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;give me a pizza&#x27;</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;text&#x27;</span>
},
<span class="hljs-attr">profile</span>: {
    <span class="hljs-attr">firstName</span>: <span class="hljs-string">&#x27;Jane&#x27;</span>,
    <span class="hljs-attr">lastName</span>: <span class="hljs-string">&#x27;Smith&#x27;</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">&#x27;updated@email.com&#x27;</span>,
    <span class="hljs-attr">properties</span>: {
        <span class="hljs-attr">justGotUpdated</span>: <span class="hljs-literal">true</span>
    }
}
});
</div></code></pre>
    <p>Note: You also can use the <code>initUserProfile</code> property to set profile values. If you use the
        <code>initUserHiddenMessage</code> property, and the response from the server is expected to have user profile
        values, then you must use the <code>initUserProfile</code> property instead of setting the values in
        <code>updateUser()</code>. For later updates to user profile, you can continue using <code>updateUser()</code>.
    </p>
    <h3 id="getsuggestionsquery">getSuggestions(query)</h3>
    <p>If autocomplete feature is enabled (<code>enableAutocomplete: true</code>), this API returns a
        <code>Promise</code> that resolves to the suggestions for the given query string. If it takes too long (~10s) to
        fetch the suggestion, the Promise is rejected.
    </p>
    <pre><code class="language-js"><div>Bots.getSuggestions(<span class="hljs-string">&#x27;pizza&#x27;</span>)
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">suggestions</span>) </span>{
    <span class="hljs-keyword">var</span> suggestionString = suggestions.toString();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The suggestions are: &#x27;</span>, suggestionString);
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Suggestion request failed&#x27;</span>, reason);
});
</div></code></pre>
    <p>The API expects a single query string parameter and returns a <code>Promise</code>. On a successful request for
        suggestions, the <code>Promise</code> is resolved to a string array. On failure, the <code>Promise</code> is
        rejected with an error message.</p>
    <p>If the API is called when the feature is disabled, it returns a rejected Promise.</p>
    <h3 id="startvoicerecordingonspeechrecognition-onspeechnetworkchange-options">
        startVoiceRecording(onSpeechRecognition, onSpeechNetworkChange, options)</h3>
    <p>Starts the voice recording if the speech recognition feature is enabled. The API returns a <code>Promise</code>
        that is resolved when the speech service is able to start recording. In case of an error, the
        <code>Promise</code> is rejected with an Error object.
        The API expects two callbacks to be passed as its parameters:
        <code>onSpeechRecognition</code> function is called on the speech server response. The JSON response is passed
        as parameter.
        <code>onSpeechNetworkChange</code> function is called on change in the speech connection. A single parameter is
        passed - the WebSocket status.
    </p>
    <pre><code class="language-js"><div>Bots.startVoiceRecording(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
<span class="hljs-keyword">var</span> recognizedText = <span class="hljs-string">&#x27;&#x27;</span>;
<span class="hljs-keyword">if</span> (data &amp;&amp; (data.event === <span class="hljs-string">&#x27;finalResult&#x27;</span> || data.event === <span class="hljs-string">&#x27;partialResult&#x27;</span>)) {
    <span class="hljs-keyword">if</span> (data.nbest &amp;&amp; data.nbest.length &gt; <span class="hljs-number">0</span>) {
        recognizedText = data.nbest[<span class="hljs-number">0</span>].utterance;
    }
}
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
<span class="hljs-keyword">if</span> (status === WebSocket.OPEN) {
    <span class="hljs-comment">// Connection established</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status === WebSocket.CLOSED) {
    <span class="hljs-comment">// Connection closed</span>
}
})
</div></code></pre>
    <p>The function additionally accepts an optional <code>options</code> object that can have fields for two callback
        functions for analyser - <code>onAnalyserReady</code>, and <code>onAnalyserFrequencies</code>. Either one, or
        both fields, can be passed.
        These callbacks can be used to get regular frequency values for visualization.</p>
    <p><code>onAnalyserReady</code> is a one-time callback that is called when the analyser node is initialized. The
        callback method is passed as a single argument, an <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/"><code>AnalyserNode</code></a>, which
        is configured with an <code>fftSize</code> of 256, and connected to the voice input source.</p>
    <p><code>onAnalyserFrequencies</code> is a callback method that is called every time a new set of voice input
        frequencies are provided by the analyser node. The callback method is passed a single argument, an
        <code>Uint8Array</code> of size 128, depicting the frequency data composed of integers on a scale from 0 to 255.
        Each item in the array represents the decibel value for a specific frequency. The frequencies are spread
        linearly from 0 to 1/2 of the sample rate. For example, for 48000 sample rate, the last item of the array will
        represent the decibel value for 24000 Hz.
    </p>
    <pre><code class="language-js"><div>Bots.startVoiceRecording(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
<span class="hljs-keyword">var</span> recognizedText = <span class="hljs-string">&#x27;&#x27;</span>;
<span class="hljs-keyword">if</span> (data &amp;&amp; (data.event === <span class="hljs-string">&#x27;finalResult&#x27;</span> || data.event === <span class="hljs-string">&#x27;partialResult&#x27;</span>)) {
    <span class="hljs-keyword">if</span> (data.nbest &amp;&amp; data.nbest.length &gt; <span class="hljs-number">0</span>) {
        recognizedText = data.nbest[<span class="hljs-number">0</span>].utterance;
    }
}
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
<span class="hljs-keyword">if</span> (status === WebSocket.OPEN) {
    <span class="hljs-comment">// Connection established</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status === WebSocket.CLOSED) {
    <span class="hljs-comment">// Connection closed</span>
}
}, {
<span class="hljs-attr">onAnalyserReady</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">analyserNode</span>) </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The analyser node is&#x27;</span>, analyserNode); },
<span class="hljs-attr">onAnalyserFrequencies</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">frequencies</span>) </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;New input frequencies are&#x27;</span>, frequencies); }
})
</div></code></pre>
    <h3 id="stopvoicerecording">stopVoiceRecording()</h3>
    <p>Stops any running voice recording. Throws an error if speech recognition is not enabled.</p>
    <pre><code class="language-js"><div>Bots.stopVoiceRecording()
</div></code></pre>
    <h3 id="setspeechlocalelocale">setSpeechLocale(locale)</h3>
    <p>Sets the locale used for speech connection. The user is expected to speak with the same locale that is set here
        to the SDK. The locales currently supported are <code>'en-us'</code>, <code>'fr-fr'</code>,
        <code>'es-es'</code>, and <code>'pt-br'</code>. If an unsupported locale is passed, the API returns
        <code>false</code> while maintaining the passed locale. In such case, any voice recognition attempt is failed.
        The function returns a Boolean indicating whether the passed locale is supported or not.
    </p>
    <pre><code class="language-js"><div>Bots.setSpeechLocale(<span class="hljs-string">&#x27;fr-fr&#x27;</span>);
</div></code></pre>
    <blockquote>
        <p><strong>Note</strong>: When both voice recognition and audio response are enabled but the audio response
            locale is not set, then the locale for the audio response voice gets set to the same locale as the voice
            recognition locale.</p>
    </blockquote>
    <p>Example:</p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK({
<span class="hljs-comment">// ...,</span>
<span class="hljs-attr">enableSpeech</span>: <span class="hljs-literal">true</span>,
<span class="hljs-attr">enableBotAudioResponse</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-comment">// ...</span>

Bots.setSpeechLocale(<span class="hljs-string">&#x27;es-es&#x27;</span>);

</div></code></pre>
    <p>In above example, the locale for audio response voice is set to <code>'es-es'</code> automatically.</p>
    <h3 id="setprimarylanguagelanguagetag">setPrimaryLanguage(languageTag)</h3>
    <p>Updates the language selected for the conversation between the user and the skill in the selection dropdown. This
        function can only be called when multi-lingual chat feature is configured.</p>
    <pre><code class="language-js"><div>Bots.setPrimaryLanguage(<span class="hljs-string">&#x27;fr&#x27;</span>)
</div></code></pre>
    <p>If the passed language tag does not match any of the passed supported languages, 'Detect Language' is set and
        skill determines which language is being used for conversation.</p>
    <h3 id="setskillvoicesvoices">setSkillVoices(voices)</h3>
    <p>Dynamically updates the synthesis voice used to narrate skill messages. The function can accept a single
        skillVoice object or an array of skillVoice objects. The function returns a <code>Promise</code> which resolves
        to the skill voice that is applied to the synthesis service. It can be one of the passed voices or a fallback in
        case none of the passed voice is available on device. The <code>Promise</code> is rejected if the skill audio
        response feature is not enabled.</p>
    <pre><code class="language-js"><div>Bots.setSkillVoices({ <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;fr-fr&#x27;</span> });

Bots.setSkillVoices({ <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;fr-fr&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Thomas&#x27;</span> })

Bots.setSkillVoices([{
<span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;es-mx&#x27;</span>,
<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Juan&#x27;</span>
}, {
<span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;es-es&#x27;</span>,
<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Monica&#x27;</span>
}, {
<span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;es-ar&#x27;</span>,
<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Diego&#x27;</span>
}, {
<span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;es-es&#x27;</span>
}])
</div></code></pre>
    <h3 id="setdelegatedelegate">setDelegate(delegate)</h3>
    <p>The <code>setDelegate</code> method can be used to change or remove delegate callbacks after a conversation has
        been initialized. If no value is passed, the existing delegates are removed.</p>
    <pre><code class="language-js"><div>Bots.connect().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
Bots.setDelegate({
    beforeDisplay(message) {
        <span class="hljs-keyword">return</span> message;
    },
    beforeSend(message) {
        <span class="hljs-keyword">return</span> message;
    },
    beforePostbackSend(postback) {
        <span class="hljs-keyword">return</span> postback;
    }
})
});
</div></code></pre>
    <h3 id="getconversationhistory">getConversationHistory()</h3>
    <p>Returns information about current conversation for the user. The response is an object containing user ID,
        messages, and unread message count.</p>
    <pre><code class="language-js"><div>Bots.getConversationHistory()

{
<span class="hljs-attr">messages</span>: [
    {
        <span class="hljs-attr">date</span>: <span class="hljs-string">&#x27;2020-01-22T17:06:24.085Z&#x27;</span>,
        <span class="hljs-attr">isRead</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">messagePayload</span>: {
            <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;show menu&#x27;</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;text&#x27;</span>
        },
        <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;user74882436&#x27;</span>
    }
],
<span class="hljs-attr">messageCount</span>: <span class="hljs-number">1</span>,
<span class="hljs-attr">unread</span>: <span class="hljs-number">0</span>,
<span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;user74882436&#x27;</span>
}
</div></code></pre>
    <h3 id="clearconversationhistoryuserid-shouldclearwidget">clearConversationHistory(userId, shouldClearWidget)</h3>
    <p>This API clears the conversation history for a known user from the browser's localStorage. The
        <code>userId</code> must be a string. On passing empty or no userId, current user's history is removed.
    </p>
    <p>If the passed <code>userId</code> is same as current user's <code>userId</code>, then you can also pass an
        optional boolean argument, <code>shouldClearWidget</code>, to configure whether the current chat widget UI
        should also be cleared on calling this API. By default, the value is <code>true</code>.</p>
    <p><em>Note</em> - This API does not interact with <code>sessionStorage</code> for users other than current user.
        The <code>sessionStorage</code> is automatically cleared on closing the tab.</p>
    <pre><code class="language-js"><div>Bots.clearConversationHistory(<span class="hljs-string">&#x27;Jonathan&#x27;</span>);      <span class="hljs-comment">// Removes conversation history of Jonathan</span>

Bots.clearConversationHistory(<span class="hljs-string">&#x27;Adriana&#x27;</span>);       <span class="hljs-comment">// Removes conversation history of Adriana and clears the widget UI if Adriana is current user</span>

Bots.clearConversationHistory(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-literal">false</span>);       <span class="hljs-comment">// Removes conversation history of current user without clearing the widget UI</span>
</div></code></pre>
    <h3 id="clearallconversationshistoryshouldclearwidget">clearAllConversationsHistory(shouldClearWidget)</h3>
    <p>This API clears the conversation history for all users from the browser's localStorage. Like
        <code>clearConversationHistory</code>, this method can also help in recovering significant portions of
        localStorage from the user's browser.
    </p>
    <p>You can also pass an optional boolean argument, <code>shouldClearWidget</code>, to configure whether the current
        chat widget UI should also be cleared on calling this API. By default, the value is <code>true</code>.</p>
    <p><strong>Warning</strong> - The actions taken by calling this API can not be undone. Once the messages are
        deleted, they cannot be recovered. Call this method sparingly and only when absolutely needed.</p>
    <p><em>Note</em> - This API does not interact with <code>sessionStorage</code> for users other than current user.
        The <code>sessionStorage</code> is automatically cleared on closing the tab.</p>
    <pre><code class="language-js"><div>Bots.clearAllConversationsHistory()
</div></code></pre>
    <h3 id="getunreadmessagescount">getUnreadMessagesCount()</h3>
    <p>Returns the count of the unread messages.</p>
    <pre><code class="language-js"><div>Bots.getUnreadMessagesCount();
</div></code></pre>
    <h3 id="setallmessagesasread">setAllMessagesAsRead()</h3>
    <p>Marks all messages as have been read/seen by user.</p>
    <pre><code class="language-js"><div>Bots.getUnreadMessagesCount(); <span class="hljs-comment">// 2</span>
Bots.setAllMessagesAsRead();
Bots.getUnreadMessagesCount(); <span class="hljs-comment">// 0</span>
</div></code></pre>
    <h3 id="setuserinputmessagetext">setUserInputMessage(text)</h3>
    <p>Fills user input field with passed message.</p>
    <pre><code class="language-js"><div>Bots.setUserInputMessage(<span class="hljs-string">&#x27;Show my agenda for today please.&#x27;</span>);
</div></code></pre>
    <h3 id="setuserinputplaceholdertext">setUserInputPlaceholder(text)</h3>
    <p>Updates user input's placeholder text. It can be utilized to change the placeholder text according to the input
        expected from the user.</p>
    <pre><code class="language-js"><div>Bots.setUserInputPlaceholder(<span class="hljs-string">&#x27;Add your pizza topping&#x27;</span>);
</div></code></pre>
    <h3 id="showtypingindicator">showTypingIndicator()</h3>
    <p>Displays the typing indicator in the conversation. If the typing indicator is already visible, the timer to hide
        it gets reset. The typing indicator is automatically removed if the server sends a response, or the timer period
        set by <code>typingIndicatorTimeout</code> (in seconds) is expired.</p>
    <p>The method only works if <code>showTypingIndicator</code> setting is set <code>true</code>, the SDK is not being
        used in headless mode, and the widget is connected to the server.</p>
    <pre><code class="language-js"><div>Bots.showTypingIndicator();
</div></code></pre>
    <h3 id="setwebviewconfigwebviewconfig">setWebViewConfig(webViewConfig)</h3>
    <p>Sets and updates the WebView configuration, customizing the WebView component. Check out In-Widget WebView
        section under customizations for more details.</p>
    <pre><code class="language-js"><div>Bots.setWebViewConfig({
<span class="hljs-attr">accessibilityTitle</span>: <span class="hljs-string">&#x27;WebView container for Wikipedia&#x27;</span>,
<span class="hljs-attr">sandbox</span>: [<span class="hljs-string">&#x27;allow-scripts&#x27;</span>, <span class="hljs-string">&#x27;allow-downloads&#x27;</span>]
<span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;tall&#x27;</span>,
<span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Wikipedia&#x27;</span>
});
</div></code></pre>
    <h3 id="setchatbubbleiconheightheight">setChatBubbleIconHeight(height)</h3>
    <p>Sets the height of loading chat bubble icon. The height must be provided as a string value in one of standard <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setChatBubbleIconHeight(<span class="hljs-string">&#x27;18px&#x27;</span>);
</div></code></pre>
    <h3 id="setchatbubbleiconwidthwidth">setChatBubbleIconWidth(width)</h3>
    <p>Sets the width of loading chat bubble icon. The width must be provided as a string value in one of standard <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setChatBubbleIconWidth(<span class="hljs-string">&#x27;24px&#x27;</span>);
</div></code></pre>
    <h3 id="setchatbubbleiconsizewidth-height">setChatBubbleIconSize(width, height)</h3>
    <p>Sets the size of loading chat bubble icon. The width and height must be provided as string values in one of the
        standard <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setChatBubbleIconSize(<span class="hljs-string">&#x27;24px&#x27;</span>, <span class="hljs-string">&#x27;18px&#x27;</span>);
</div></code></pre>
    <h3 id="setfontfont">setFont(font)</h3>
    <p>Sets the font for the chat widget. The syntax of <code>font</code> must follow the <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/font">standard pattern</a>.</p>
    <pre><code class="language-js"><div>Bots.setFont(<span class="hljs-string">&#x27;14px italic large sans-serif&#x27;</span>);
</div></code></pre>
    <blockquote>
        <p>Note: The function has been made obsolete and will be removed in upcoming releases. Plesae use
            <code>setFontFamily()</code> for setting font family, and <code>setFontSize()</code> for setting font size.
        </p>
    </blockquote>
    <h3 id="setfontfamilyfontfamily">setFontFamily(fontFamily)</h3>
    <p>Set font family used for all text content in the chat widget. The <code>fontFamily</code> argument must be a
        string and follow the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-family">standard
            pattern</a>.</p>
    <pre><code class="language-js"><div>Bots.setFontFamily(<span class="hljs-string">&#x27;&quot;Gill Sans&quot;, sans-serif&#x27;</span>);
</div></code></pre>
    <h3 id="setfontsizefontsize">setFontSize(fontSize)</h3>
    <p>Sets the font size for the text in chat widget. The syntax of <code>fontSize</code> must follow the standard <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-size">permissible values</a>.</p>
    <pre><code class="language-js"><div>Bots.setFontSize(<span class="hljs-string">&#x27;16px&#x27;</span>);
</div></code></pre>
    <h3 id="setheightheight">setHeight(height)</h3>
    <p>Sets the height of chat widget. The value passed must be in one of <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setHeight(<span class="hljs-string">&#x27;786px&#x27;</span>)
</div></code></pre>
    <h3 id="setwidthwidth">setWidth(width)</h3>
    <p>Sets the width of chat widget. The value passed must be in one of <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setWidth(<span class="hljs-string">&#x27;320px&#x27;</span>)
</div></code></pre>
    <h3 id="setsizewidth-height">setSize(width, height)</h3>
    <p>Sets the size of chat widget. The values passed must be in one of <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/length">length</a> units.</p>
    <pre><code class="language-js"><div>Bots.setSize(<span class="hljs-string">&#x27;320px&#x27;</span> ,<span class="hljs-string">&#x27;786px&#x27;</span>,)
</div></code></pre>
    <h3 id="setmessagepaddingpadding">setMessagePadding(padding)</h3>
    <p>Sets the padding around the message in the chat widget. The syntax of <code>padding</code> must follow standard
        <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding">permissible values</a>.
    </p>
    <pre><code class="language-js"><div><span class="hljs-comment">// Apply padding to all four sides</span>
Bots.setMessagePadding(<span class="hljs-string">&#x27;15px&#x27;</span>);
<span class="hljs-comment">// vertical | horizontal</span>
Bots.setMessagePadding(<span class="hljs-string">&#x27;5% 10%&#x27;</span>);
<span class="hljs-comment">// top | horizontal | bottom</span>
Bots.setMessagePadding(<span class="hljs-string">&#x27;15em 20em 20em&#x27;</span>);
<span class="hljs-comment">// top | right | bottom | left</span>
Bots.setMessagePadding(<span class="hljs-string">&#x27;15px 20px 20px 15px&#x27;</span>);
</div></code></pre>
    <h3 id="settextcolorcolor">setTextColor(color)</h3>
    <p>Sets the primary text color of messages in chat widget. It does not modify the colors in actions. The value
        passed must be in standard <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">color</a>
        format.</p>
    <pre><code class="language-js"><div>Bots.setTextColor(<span class="hljs-string">&#x27;#33ee00&#x27;</span>)
</div></code></pre>
    <h3 id="settextcolorlightcolor">setTextColorLight(color)</h3>
    <p>Sets the color of the secondary messages in chat widget, like descriptions. The value passed must be in standard
        <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">color</a> format.
    </p>
    <pre><code class="language-js"><div>Bots.setTextColorLight(<span class="hljs-string">&#x27;rgb(13, 155, 200)&#x27;</span>)
</div></code></pre>
    <h2 id="events">Events</h2>
    <p>To bind an event, use <code>Bots.on(&lt;event name&gt;, &lt;handler&gt;)</code>. To unbind events, you can
        either:</p>
    <ul>
        <li>Call <code>Bots.off(&lt;event name&gt;, handler)</code> to remove one specific handler.</li>
        <li>Call <code>Bots.off(&lt;event name&gt;)</code> to remove all handlers for an event.</li>
        <li>Call <code>Bots.off()</code> to unbind all handlers.</li>
    </ul>
    <p>It is preferable to add event handlers before calling <code>connect()</code> method, so that they can be
        registered and triggered appropriately.</p>
    <h3 id="ready">ready</h3>
    <p>This event is triggered when init completes successfully. Be sure to bind before calling init.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;ready&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the init has completed!&#x27;</span>);
});
</div></code></pre>
    <p>Listeners to <code>ready</code> event must be added before calling the <code>connect()</code> method, otherwise
        the listeners will not be registered in time to be triggered.</p>
    <h3 id="destroy-1">destroy</h3>
    <p>This event is triggered when the widget is destroyed.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;destroy&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the widget is destroyed!&#x27;</span>);
});
Bots.destroy();
</div></code></pre>
    <h3 id="messagereceived">message:received</h3>
    <p>This event is triggered when the user receives a message.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;message:received&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the user received a message&#x27;</span>, message);
});
</div></code></pre>
    <h3 id="messagesent">message:sent</h3>
    <p>This event is triggered when the user sends a message.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;message:sent&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the user sent a message&#x27;</span>, message);
});
</div></code></pre>
    <h3 id="message">message</h3>
    <p>This event is triggered when a message was added to the conversation.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;a message was added to the conversation&#x27;</span>, message);
});
</div></code></pre>
    <h3 id="networkstatuschange">networkstatuschange</h3>
    <p>This event is triggered whenever the network status of the connection to the server changes. The callback
        receives a status number parameter, which corresponds to <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Constants">WebSocket network status
            constants</a>.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;networkstatuschange&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
<span class="hljs-keyword">switch</span> (status) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        status = <span class="hljs-string">&#x27;Connecting&#x27;</span>;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
        status = <span class="hljs-string">&#x27;Open&#x27;</span>;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
        status = <span class="hljs-string">&#x27;Closing&#x27;</span>;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
        status = <span class="hljs-string">&#x27;Closed&#x27;</span>;
        <span class="hljs-keyword">break</span>;
}
<span class="hljs-built_in">console</span>.log(status);
});
</div></code></pre>
    <h3 id="typing">typing</h3>
    <p>This event is triggered whenever the user starts or stops typing in the user input field. The listener receives a
        boolean parameter, which is set <code>true</code> when user starts typing and set <code>false</code> when user
        stops typing.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;typing&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isTyping</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;User currently typing: &#x27;</span>, isTyping);
});
</div></code></pre>
    <h3 id="unreadcount">unreadCount</h3>
    <p>This event is triggered when the number of unread messages changes.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;unreadCount&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">unreadCount</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;the number of unread messages was updated&#x27;</span>, unreadCount);
});
</div></code></pre>
    <h3 id="widgetopened">widget:opened</h3>
    <p>This event is triggered when the widget is opened.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;widget:opened&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Widget is opened!&#x27;</span>);
});
</div></code></pre>
    <h3 id="widgetclosed">widget:closed</h3>
    <p>This event is triggered when the widget is closed.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;widget:closed&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Widget is closed!&#x27;</span>);
});
</div></code></pre>
    <h3 id="clickaudiotoggle">click:audiotoggle</h3>
    <p>This event is triggered when the audio utterance of response is toggled. The subscribers receive the Boolean
        status - <code>true</code> if the audio response is turned on, <code>false</code> if it is turned off.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;click:audiotoggle&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
<span class="hljs-keyword">if</span> (status === <span class="hljs-literal">true</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Audio response is turned on.&#x27;</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Audio response is turned off.&#x27;</span>);
}
})
</div></code></pre>
    <h3 id="clickerase">click:erase</h3>
    <p>This event is triggered when the erase conversation history button is clicked. No parameters are passed to the
        subscribers.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;click:erase&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Conversation history is erased.&#x27;</span>);
})
</div></code></pre>
    <h3 id="clickvoicetoggle">click:voicetoggle</h3>
    <p>This event is triggered when the voice activation button is toggled. The subscribers receive the Boolean status -
        <code>true</code> if the voice is activated, <code>false</code> if it is deactivated.
    </p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;click:voicetoggle&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
<span class="hljs-keyword">if</span> (status === <span class="hljs-literal">true</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Voice recording is started.&#x27;</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Voice recording is stopped.&#x27;</span>);
}
})
</div></code></pre>
    <h3 id="chatlanguagechange">chatlanguagechange</h3>
    <p>This event is triggered when the chat language in language selection dropdown is selected or changed. This
        dropdown is exposed on enabling <a href="#multi-lingual-chat">Multi-Lingual Chat</a> feature. Its subscribers
        receive the selected language's language tag. If auto-detect is selected, <code>null</code> is passed as the
        argument.</p>
    <pre><code class="language-js"><div>Bots.on(<span class="hljs-string">&#x27;chatlanguagechange&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">language</span>) </span>{
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The selected chat language is&#x27;</span>, language);
});
</div></code></pre>
    <h2 id="features">Features</h2>
    <h3 id="autocomplete">Autocomplete</h3>
    <p><code>Feature Flag: enableAutocomplete: true</code> (default: <code>false</code>)</p>
    <p><code>Enable client side caching: enableAutocompleteClientCache</code></p>
    <p>Autocomplete provides suggestions to end users to better form the utterance and select the specific entity value.
        For it to work, you must add autocomplete suggestions to the skill's intents. Then, whenever the user types a
        character in the input, the intents' autocomplete suggestions display in a popup to suggest the best format and
        to minimize user errors. An intent's autocomplete suggestions should not be a full word dictionary. Their
        purpose is to minimize the scope and allow better guidance to the end user.</p>
    <p>The feature can also be used in headless mode using <code>getSuggestions()</code> API. The API details are
        described in the Method section above.</p>
    <h3 id="delegation">Delegation</h3>
    <p><code>Feature configuration: delegate</code></p>
    <p>The delegation feature lets you set a delegate to receive callbacks before certain events in the conversation. To
        set a delegate, pass it in the <code>delegate</code> property or use the <code>setDelegate</code> method. The
        delegate object may optionally contain <code>beforeDisplay</code>, <code>beforeSend</code>, and
        <code>beforePostbackSend</code> delegate functions.
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> delegate = {
<span class="hljs-attr">beforeDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
    <span class="hljs-keyword">return</span> message;
},
<span class="hljs-attr">beforeSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
    <span class="hljs-keyword">return</span> message;
},
<span class="hljs-attr">beforePostbackSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">postback</span>) </span>{
    <span class="hljs-keyword">return</span> postback;
}
}

Bots.setDelegate(delegate);
</div></code></pre>
    <h4 id="beforedisplay">beforeDisplay</h4>
    <p>The <code>beforeDisplay</code> delegate allows a skill message to be modified before it is displayed in the
        conversation. The message returned by the delegate is used to display the message. If it returns a falsy value,
        like <code>null</code>, <code>undefined</code>, or <code>false</code>, the message is not displayed.</p>
    <h4 id="beforesend">beforeSend</h4>
    <p>The <code>beforeSend</code> delegate allows a user message to be modified before it is sent to the chat server.
        The message returned by the delegate is sent to skill. If it returns a falsy value, like <code>null</code>,
        <code>undefined</code>, or <code>false</code>, the message is not displayed.
    </p>
    <h4 id="beforepostbacksend">beforePostbackSend</h4>
    <p>The <code>beforePostbackSend</code> delegate is similar to <code>beforeSend</code>, just applied to postback
        messages from user. The postback returned by the delegate is sent to skill. If it returns a falsy value, like
        <code>null</code>, <code>undefined</code>, or <code>false</code>, the message is not displayed.
    </p>
    <h3 id="embedded-mode">Embedded mode</h3>
    <p><code>Feature flag: embedded: true</code> (default: <code>false</code>)</p>
    <p><code>Pass ID of target container element: targetElement</code></p>
    <p>The chat widget appears as a fixed position element on the bottom right of the page, which does not respond to
        gestures on the page. But it can also be embedded into the host and become part of the page. To activate the
        embedded mode, you need to pass <code>embedded: true</code>, and provide a target container with
        <code>targetElement: &lt;targetDivId&gt;</code> . This accepts a DOM element which will be used as the container
        where the widget will be rendered.
    </p>
    <p>The embedded widget occupies the full width and height of the container. A height and width must be specified for
        the target element. Otherwise, the widget will collapse.</p>
    <h3 id="headless-sdk">Headless SDK</h3>
    <p><code>Feature flag: enableHeadless: true</code> (default: <code>false</code>)</p>
    <p>Similar to headless browsers, the SDK can also be used without a UI. The SDK maintains the connection to the
        server, and provides APIs to send messages, receive messages, and get updates of the to network status.
        Developers can use the APIs to interact with the SDK, and update UI appropriately.</p>
    <p>The communication can be implemented as follows:</p>
    <ul>
        <li>Sending messages - Call <code>Bots.sendMessage(message)</code> to pass any payload to server.</li>
        <li>Receiving messages - Response can be listened for using
            <code>Bots.on('message:received', &lt;messageReceivedCallbackFunction&gt;)</code>.
        </li>
        <li>Get connection status update - Updates to status of the connection to server can be listened for using
            <code>Bots.on('networkstatuschange', &lt;networkStatusCallbackFunction&gt;)</code>. The callback has a
            parameter <code>status</code>, which is updated with values from 0 to 3. These values map to <a
                href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Constants">WebSocket states</a>:
            <ul>
                <li>0 - WebSocket.CONNECTING - Connecting</li>
                <li>1 - WebSocket.OPEN - Open</li>
                <li>2 - WebSocket.CLOSING - Closing</li>
                <li>3 - WebSocket.CLOSED - Closed</li>
            </ul>
        </li>
        <li>Check if connection is open - Call <code>Bots.isConnected()</code> to check if the connection is open or
            not.</li>
        <li>Get suggestions list - If autocomplete is enabled, call <code>Bots.getSuggestions(query)</code> where query
            is the string to get the suggestions list.</li>
    </ul>
    <h3 id="in-widget-webview">In-Widget WebView</h3>
    <p>Feature flag: <code>linkHandler: { target: 'oda-chat-webview' }</code></p>
    <p>Customization: <code>webViewConfig</code></p>
    <p>Public method: <code>setWebViewConfig(webViewConfig)</code></p>
    <p>The Web SDK contains an In-widget WebView component that can be used to view the message links within the chat
        widget. This feature allows users to interact with links in the conversation without taking them away from the
        widget to a new tab or window. The in-widget WebView can be applied globally to open all links in the messages
        inside it, or can be selectively configured for specific links.</p>
    <p>To open all links in the conversation in the WebView, you just need to pass
        <code>linkHandler: { target: 'oda-chat-webview' }</code> in the settings. This sets the target of all links to
        'oda-chat-webview', which is the WebView iframe's name.
    </p>
    <p>In more general scenarios, you'll probably need to open only certain links in the WebView, while ensuring other
        links open normally in other tabs/windows. The <code>beforeDisplay</code> delegate can be used to make that
        work. To open a specific message URL action in the WebView, replace action.type field's value from 'url' to
        'webview'. Once the action type is changed to 'webview' in beforeDisplay, clicking that action button will open
        the link in the WebView.
        Opening specific links embedded in the text in WebView is a bit more challenging. The embedded link needs to be
        converted into anchor element (&lt;a href=&quot;<a
            href="https://www.oracle.com">https://www.oracle.com</a>&quot;&gt;), and
        <code>target=&quot;oda-chat-webview&quot;</code> attribute should be added in that anchor element.
    </p>
    <p>The <code>webViewConfig</code> setting allows customizing the WebView component. It accepts an object that can
        have following optional fields:</p>
    <pre><code class="language-js"><div>{
<span class="hljs-attr">accessibilityTitle</span>: string,                             <span class="hljs-comment">// Name of WebView frame element for Web Accessibility</span>
<span class="hljs-attr">closeButtonIcon</span>: string,                                <span class="hljs-comment">// Image URL/SVG string that is used to display the close button icon</span>
<span class="hljs-attr">closeButtonLabel</span>: string,                               <span class="hljs-comment">// Text label/tooltip title for the close button</span>
<span class="hljs-attr">closeButtonType</span>: <span class="hljs-string">&#x27;icon&#x27;</span> | <span class="hljs-string">&#x27;label&#x27;</span> | <span class="hljs-string">&#x27;iconWithLabel&#x27;</span>,    <span class="hljs-comment">// Sets how the close button is displayed in the WebView</span>
<span class="hljs-attr">errorInfoBar</span>: boolean,                                  <span class="hljs-comment">// Sets to display or hide fallback view with original URL</span>
<span class="hljs-attr">errorInfoDismissLabel</span>: string,                          <span class="hljs-comment">// Label for error-view bar dismiss button</span>
<span class="hljs-attr">errorInfoText</span>: string,                                  <span class="hljs-comment">// Informational text displayed in an error-view bar inside WebView as a fallback for the user in case the URL fails to load in the WebView</span>
<span class="hljs-attr">referrerPolicy</span>: ReferrerPolicy                          <span class="hljs-comment">// Indicates which referrer to send when fetching the frame&#x27;s resource</span>
<span class="hljs-attr">sandbox</span>: string[],                                      <span class="hljs-comment">// Array of extra restrictions to the content in the WebView frame</span>
<span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;tall&#x27;</span> | <span class="hljs-string">&#x27;full&#x27;</span>,                                  <span class="hljs-comment">// Height of the WebView compared to chat widget. When set &#x27;tall&#x27;, it is set as 80%, 100% for &#x27;full&#x27;.</span>
<span class="hljs-attr">title</span>: string                                           <span class="hljs-comment">// WebView title shown on the header of the WebView container</span>
}
</div></code></pre>
    <p>The <code>referrerPolicy</code> policy value passed should be a <a
            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy#Directives">valid
            directive</a>. The default policy applied is <code>'no-referrer-when-downgrade'</code>.</p>
    <p>The <code>sandbox</code> field accepts array of valid restriction strings that allows for the exclusion of
        certain actions inside the frame. The restrictions that can be passed to the field can be found under the
        sandbox attribute manual at <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe">MDN</a>.
    </p>
    <p>The configuration can also by updated dynamically by passing a webViewConfig object in the method
        <code>setWebViewConfig()</code>. Every property in the object is optional.
    </p>
    <p>The WebView optionally presents a fallback Snackbar view that contains the original URL link as a fallback in
        case the page fails to load inside the WebView. Clicking the link in this view opens the page in a new tab. The
        informational text can be customized with <code>webViewErrorInfoText</code> i18n translation string, and must
        contain a placeholder text for for the link label. e.g.</p>
    <pre><code class="language-js"><div>settings = {
<span class="hljs-attr">URI</span>: <span class="hljs-string">&#x27;instance&#x27;</span>,
<span class="hljs-comment">//...,</span>
<span class="hljs-attr">i18n</span>: {
    <span class="hljs-attr">en</span>: {
        <span class="hljs-attr">webViewErrorInfoText</span>: <span class="hljs-string">&#x27;This link can\&#x27;t be opened here. You can open it in a new page by clicking {0}here{/0}.&#x27;</span>
    }
}
}
</div></code></pre>
    <p>This error view can be disabled by passing <code>errorInfoBar: false</code> in the <code>webViewConfig</code>
        setting.</p>
    <p><strong>Limitations</strong></p>
    <ol>
        <li>Pages which provide response header <code>X-frame-options: deny</code> or
            <code>X-frame-options: sameorigin</code> may not open in the WebView due to server side restrictions
            preventing the page to be opened inside iframes. The WebView presents the link back to the user in a
            dissmissable Snackbar in the WebView and they can open it in a new window or tab by clicking it.
        </li>
        <li>Due to the above restrictions, authorization pages like IDCS, Google Login, FB Login etc. can not be opened
            inside the WebViews, as authorization pages always return <code>X-frame-options: deny</code> to prevent <a
                href="https://tools.ietf.org/html/draft-ietf-oauth-v2-23#section-10.13">clickjacking</a>.</li>
        <li>Only links inside the conversation messages can be opened inside the WebView. Any external links must not be
            targeted to be opened in the WebView, clicking on such links won't open the WebView correctly.</li>
    </ol>
    <h3 id="long-polling">Long Polling</h3>
    <p><code>Feature flag: enableLongPolling: true</code> (default: <code>false</code>)</p>
    <p>The SDK uses WebSockets to connect to the server and converse with skills. If for some reason the WebSocket is
        disabled over the network, traditional http calls can be used to chat with the skill. This feature is known as
        long polling, as the SDK has to continuously call or 'poll' the server to fetch the latest messages from the
        skill.</p>
    <p>Long polling provides fallback support for conversations on browsers which don't have WebSockets enabled or
        blocked.</p>
    <h3 id="multi-lingual-chat">Multi-Lingual Chat</h3>
    <p><code>Feature flag: multiLangChat</code></p>
    <p>The Web SDK's native language support enables the chat widget to both detect a user's language and allow the user
        to select a preferred language from a dropdown menu in the header. Users can switch languages between
        conversations, not during conversations.</p>
    <p>To enable this menu, define the <code>multiLangChat</code> property with an object containing the
        <code>supportedLangs</code> array, which is comprised of language tags (<code>lang</code>) and an optional
        display label (<code>label</code>). Outside of this array, you can optionally set the default language with the
        <code>primary</code> key.
    </p>
    <pre><code class="language-js"><div>multiLangChat: {
<span class="hljs-attr">supportedLangs</span>: [{
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en&#x27;</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;es&#x27;</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Español&#x27;</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;fr&#x27;</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Français&#x27;</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;hi&#x27;</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;हिंदी&#x27;</span>
}],
<span class="hljs-attr">primary</span>: <span class="hljs-string">&#x27;en&#x27;</span>
}
</div></code></pre>
    <p>The chat widget shows the passed supported languages in a dropdown menu in the header. On selecting a language,
        the current conversation is reset, and a new conversation is started with the selected language. If the response
        narration feature is enabled, the responses are narrated in the selected language's voice. If the voice
        recognition feature is enabled, and a language supported by the recognition service is selected, it also uses
        the same language to interpret user's voice messages.</p>
    <p>The chat widget additionally displays a 'Detect Language' option in the dropdown. Selecting this tells the skill
        to automatically detect the conversation language from the user's message and respond in the same language, if
        possible.</p>
    <p>You can dynamically update the selected language by calling <code>setPrimaryChatLanguage(lang)</code> API. If the
        passed lang matches one of the supported languages, it is selected. On finding no match, 'Detect Language' is
        selected. You can also select 'Detected Language' option by calling <code>setPrimaryChatLanguage('und')</code>,
        where <code>'und'</code> indicates undetermined.</p>
    <p>The language selected by a given user persists across sessions in the same browser. When the same user revisits
        the page with the chat widget with same skill, the previously selected language is automatically selected.</p>
    <p>You can add listener for a change in the selected language with <code>'chatlanguagechange'</code> event. The
        syntax of adding listener to this event is provided at <a href="#chatlanguagechange">chatlanguagechange</a>
        event section.</p>
    <p>Here are some things to keep in mind:</p>
    <ul>
        <li>You need to define a minimum of two languages to enable this dropdown menu to display.</li>
        <li>The <code>label</code> key is optional for the natively supported languages: <code>fr</code> displays as
            'French' in the menu, <code>es</code> displays as 'Spanish', and so on. However, if you've added a language
            that's not one of the natively supported languages, then you should add a <code>label</code> to identify the
            tag, especially when there is no <code>i18n</code> string for the language. For example, if you don’t define
            <code>label: 'हिंदी'</code> , for the <code>lang: hi</code>, then the dropdown displays 'hi' instead,
            contributing to a suboptimal user experience.
        </li>
        <li>Labels for the languages can be set more dynamically by passing the labels in <code>i18n</code> setting. You
            can set the label for any language by passing it to its <code>language_&lt;languageTag&gt;</code> key. For
            example,</li>
    </ul>
    <pre><code class="language-js"><div>i18n: {
<span class="hljs-attr">en</span>: {
    <span class="hljs-attr">langauge_de</span>: <span class="hljs-string">&#x27;German&#x27;</span>,
    <span class="hljs-attr">language_en</span>: <span class="hljs-string">&#x27;English&#x27;</span>,
    <span class="hljs-attr">language_sw</span>: <span class="hljs-string">&#x27;Swahili&#x27;</span>,
    <span class="hljs-attr">language_tr</span>: <span class="hljs-string">&#x27;Turkish&#x27;</span>
},
<span class="hljs-attr">de</span>: {
    <span class="hljs-attr">langauge_de</span>: <span class="hljs-string">&#x27;Deutsche&#x27;</span>,
    <span class="hljs-attr">language_en</span>: <span class="hljs-string">&#x27;Englisch&#x27;</span>,
    <span class="hljs-attr">language_sw</span>: <span class="hljs-string">&#x27;Swahili&#x27;</span>,
    <span class="hljs-attr">language_tr</span>: <span class="hljs-string">&#x27;Türkisch&#x27;</span>
}
}
</div></code></pre>
    <p>This pattern allows setting labels for any language, supported or unsupported, and also allows translations of
        the label itself in different locales.</p>
    <ul>
        <li>If you omit the <code>primary</code> key, the widget automatically detects the language in the user profile
            and selects the Detect Language option in the menu.</li>
        <li>Voice recognition and narration, when configured, are available when users select a supported language, but
            are not available when the Detect Language option is set.</li>
        <li>If voice recognition is enabled, selecting a language that is not supported by the voice recognition
            disables the recognition functionality until a supported language is selected.</li>
    </ul>
    <h3 id="response-narration">Response narration</h3>
    <p><code>Feature flag: enableBotAudioResponse: true</code> (default: <code>false</code>)</p>
    <p><code>Functionality configuration: skillVoices</code></p>
    <p>The SDK can use the device's speech synthesis APIs to narrate the server's responses. You use the
        <code>skillVoices</code> array to set the voice preferences. Each item in the array must be an object that has a
        <code>lang</code> field and an optional <code>name</code> field. The SDK looks up the availability of each voice
        on the device in the order that they are passed in the setting, and the first complete match is set as the
        voice. If no exact match is found, then the SDK uses the first match based on the <code>lang</code> value alone.
        If there's still no match, then the SDK uses the device's default language.
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> settings = {
...,
<span class="hljs-attr">enableBotAudioResponse</span>: <span class="hljs-literal">true</span>,
<span class="hljs-attr">skillVoices</span>: [{
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Samantha&#x27;</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en-US&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alex&#x27;</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en-UK&#x27;</span>
}]
}
</div></code></pre>
    <p>With version 21.02, the <code>skillVoices</code> array allows passing additional <code>pitch</code>,
        <code>rate</code>, and <code>volume</code> optional properties in each item to tailor the way the utterances are
        spoken. These properties correspond to the same fields in <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance">SpeechSynthesisUtterance</a>
        interface.
    </p>
    <p>The <code>pitch</code> property can have a value between 0 and 2, <code>rate</code> can have a value between 0.1
        and 10, and <code>volume</code> can have a value between 0 and 1.</p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> settings = {
<span class="hljs-comment">// ....,</span>
<span class="hljs-attr">skillVoices</span>: [{
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en-us&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alex&#x27;</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">1.5</span>,
    <span class="hljs-attr">rate</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">volume</span>: <span class="hljs-number">0.8</span>
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en-us&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Victoria&#x27;</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">1.2</span>,
    <span class="hljs-attr">rate</span>: <span class="hljs-number">1.7</span>,
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Fiona&#x27;</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">2</span>,
}, {
    <span class="hljs-attr">lang</span>: <span class="hljs-string">&#x27;en&#x27;</span>
}]
}
</div></code></pre>
    <h3 id="voice-recognition">Voice Recognition</h3>
    <p><code>Feature flag: enableSpeech: true</code> (default: <code>false</code>)</p>
    <p><code>Functionality configuration: enableSpeechAutoSend</code></p>
    <p>The SDK has been integrated with speech recognition to send messages in the form of voice to skills and digital
        assistants. It allows users to talk directly to the skill during conversations and get appropriate responses.
    </p>
    <p>When the feature is enabled, a mic button appears in place of the send button whenever the user input field is
        empty. The user can click on the mic button to start voice recording and send it to the speech server for
        recognition. The speech is converted to text and sent to the skill or digital assistant. If the speech is
        partially recognized, the partial result is set in the user input field and the user can clean it up before
        sending it.</p>
    <p>The feature can also be utilized using two exposed methods -
        <code>startVoiceRecording(onSpeechRecognition, onSpeechNetworkChange, options)</code> to start recording, and
        <code>stopVoiceRecording()</code> to stop recording. The APIs are detailed in the Method section above.
    </p>
    <p>The <code>enableSpeechAutoSend</code> flag setting lets you configure whether to send the text that's recognized
        from the user's voice directly to the chat server. When set to <code>true</code> (the default), the user's
        speech response is automatically sent to the chat server. When set to <code>false</code>, the user's speech
        response is rendered in the input text field before it is sent to the chat server so that users can manually
        modify it before sending, or delete the message.</p>
    <h3 id="absolute-and-relative-timestamps">Absolute and Relative Timestamps</h3>
    <p>Feature flag: <code>enableTimestamp: true</code> (default: <code>true</code>)</p>
    <p>Functionality configuration: <code>timestampFormat</code></p>
    <p>You can enable absolute or relative timestamps for chat messages. Absolute timestamps display the exact time for
        each message. Relative timestamps display only on the latest message and express the time in terms of the
        moments, minutes, hours, days, months, or years ago relative to the previous message.</p>
    <p>The precision afforded by absolute timestamps make them ideal for archival tasks, but within the limited context
        of a chat session, this precision detracts from the user experience because users must compare timestamps to
        find out the passage of time between messages. Relative timestamps allow users to track the conversation easily
        through terms like <em>Just Now</em> and <em>A few moments ago</em> that can be immediately understood. Relative
        timestamps improve the user experience in another way while also simplifying your development tasks: because
        relative timestamps mark the messages in terms of seconds, minutes, hours, days, months, or years ago, you don't
        need to convert them for time zones.</p>
    <h2 id="customizations">Customizations</h2>
    <p>Customizability is one of the biggest strengths of the Web SDK. In this section, we'll cover some of the various
        customizations that can be performed on the SDK.</p>
    <h3 id="add-avatar-icons-with-messages">Add avatar icons with messages</h3>
    <p>The messages in the chat are by default not accompanied with any avatars. It can however be configured to show
        icons with user and skill messages with the help of following parameters:</p>
    <ul>
        <li><code>botIcon</code> - URL of the image source that should be displayed alongside the skill messages. e.g.
            botIcon: '<a
                href="https://image.flaticon.com/icons/svg/3011/3011301.svg">https://image.flaticon.com/icons/svg/3011/3011301.svg</a>'
        </li>
        <li><code>personIcon</code> - URL of the image source that should be displayed alongside the user messages, e.g.
            personIcon: '<a
                href="https://image.flaticon.com/icons/svg/3011/3011311.svg">https://image.flaticon.com/icons/svg/3011/3011311.svg</a>'
            Additionally, if the skill has a live agent integration, the SDK can be configured to show a different icon
            for agent messages.</li>
        <li>agentAvatar - URL of the image source that should be displayed alongside the agent messages. If this value
            is not provided, but botIcon is set, botIcon is used instead.</li>
    </ul>
    <p>All of the above settings can only be passed in the initialization settings, and can not be modified dynamically.
    </p>
    <h3 id="change-header-buttons-icons">Change header buttons icons</h3>
    <p>There are three buttons on the chat header that be displayed in the chat widget. These buttons can be configured
        and customized as follows:</p>
    <ul>
        <li>Clear Message button - Clicking this button clears the current and older messages in the conversation
            <ul>
                <li>Feature flag - <code>enableClearMessage: true</code></li>
                <li>Custom icon - <code>clearMessageIcon: '&lt;image URL | SVG string&gt;'</code></li>
            </ul>
        </li>
        <li>Audio response toggle button - This button toggles the utterance of skill responses as they are received. As
            it is a toggle button, it has two states, utterance on, where responses are spoken, and utterance off, where
            responses are not spoken.
            <ul>
                <li>Feature flag - <code>enableBotAudioResponse: true</code></li>
                <li>Custom icon - response on - <code>audioResponseOnIcon: '&lt;image URL | SVG string&gt;'</code>
                    response off - <code>audioResponseOffIcon: '&lt;image URL | SVG string&gt;'</code></li>
            </ul>
        </li>
        <li>Close widget button - This button collapses the widget and shows the launch button. This button can not be
            disabled in normal chat widget, and it is not shown in the embedded chat widget.
            <ul>
                <li>Feature flag - none (always enabled in chat widget, not displayed in embedded mode)</li>
                <li>Custom icon - <code>closeIcon : '&lt;image URL | SVG string&gt;'</code></li>
            </ul>
        </li>
    </ul>
    <p>These header button icons can customized in two ways - by passing the source URL of the image, or by passing a
        raw SVG string. If raw SVG string is passed, the fill color of the SVG can be customized by CSS classes, as well
        as by passing a color value in colors.headerButtonFill property in initial settings. The color customization may
        not work for all SVGs, as they can be multi-colored or have their own stroke and fill colors.</p>
    <h3 id="draggable-launch-button">Draggable launch button</h3>
    <p>Feature flag: <code>enableDraggableButton: true</code> (default: <code>false</code>)</p>
    <p>In some scenarios, the chat widget launch button can block the background content and there may not be an easy
        way to view it. This can be especially apparent in mobile screens where there is less space available for the
        web page. However, by setting <code>enableDraggableButton</code> to <code>true</code>, the chat widget launch
        button can be made draggable, so the users can drag it around the screen as needed. This flag only affects the
        launch button. The widget still gets expanded from its original location.</p>
    <h3 id="focus-first-action-of-skill-message">Focus first action of skill message</h3>
    <p>Feature flag: <code>focusOnNewMessage: 'action'</code> (default: <code>'input'</code>)</p>
    <p>With each new message, the chat widget normally sets the focus back to the user input field. This works well when
        the dialog flow expects a lot of textual input from the user. However, if the dialog flow contains a number of
        messages with actions, then the user need to either employ their mouse or reverse tab navigation to select one
        of the actions. For such use cases and for power users who prefer keyboard based navigation, a better choice can
        be focusing the first action button in the skill message as it is received. By setting
        <code>focusOnNewMessage: 'action'</code>, when a new skill message containing actions is received, the focus is
        set to the first action button. If the message does not contain any actions, the focus is set to the user input
        field.
    </p>
    <h3 id="format-message-timestamps">Format message timestamps</h3>
    <p>Feature flag: <code>enableTimestamp: true</code> (default: <code>true</code>)</p>
    <p>Functionality configuration: <code>timestampFormat</code></p>
    <p>Timestamps are shown with messages indicating the time they were sent or received. By default, they are displayed
        in the locale time in day of week, month date, year, time am/pm format, e.g. Thursday, August 13, 2020, 9:52:22
        AM. This timestamp can be configured by passing formatting options in the <code>timestampFormat</code> setting.
    </p>
    <p>The formatting can be performed in two ways - by passing a pattern string consisting of formatting tokens, or by
        passing an object containing <a
            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#Syntax">Intl.DateTimeFormat</a>
        options.</p>
    <ul>
        <li>Using pattern string
            The timestamp can be formatted by passing a pattern string which is composed of format tokens. The available
            format tokens are:</li>
    </ul>
    <table>
        <thead>
            <tr>
                <th>Component</th>
                <th>Token</th>
                <th>Output</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Day of Month</td>
                <td>D</td>
                <td>1 2 ... 30 31</td>
            </tr>
            <tr>
                <td></td>
                <td>Do</td>
                <td>1st 2nd ... 30th 31st</td>
            </tr>
            <tr>
                <td></td>
                <td>DD</td>
                <td>01 02 ... 30 31</td>
            </tr>
            <tr>
                <td>Day of Week</td>
                <td>d</td>
                <td>0 1 ... 5 6</td>
            </tr>
            <tr>
                <td></td>
                <td>ddd</td>
                <td>Sun Mon ... Fri Sat</td>
            </tr>
            <tr>
                <td></td>
                <td>dddd</td>
                <td>Sunday Monday ... Friday Saturday</td>
            </tr>
            <tr>
                <td>Month</td>
                <td>M</td>
                <td>1 2 ... 11 12</td>
            </tr>
            <tr>
                <td></td>
                <td>MM</td>
                <td>01 02 ... 11 12</td>
            </tr>
            <tr>
                <td></td>
                <td>MMM</td>
                <td>Jan Feb ... Nov Dec</td>
            </tr>
            <tr>
                <td></td>
                <td>MMMM</td>
                <td>January February ... November December</td>
            </tr>
            <tr>
                <td>Year</td>
                <td>YY</td>
                <td>70 71 ... 29 30</td>
            </tr>
            <tr>
                <td></td>
                <td>YYYY</td>
                <td>1970 1971 ... 2029 2030</td>
            </tr>
            <tr>
                <td>Hour</td>
                <td>H</td>
                <td>0 1 ... 22 23</td>
            </tr>
            <tr>
                <td></td>
                <td>HH</td>
                <td>00 01 ... 22 23</td>
            </tr>
            <tr>
                <td></td>
                <td>h</td>
                <td>1 2 ... 11 12</td>
            </tr>
            <tr>
                <td></td>
                <td>hh</td>
                <td>01 02 ... 11 12</td>
            </tr>
            <tr>
                <td>Minute</td>
                <td>m</td>
                <td>0 1 ... 58 59</td>
            </tr>
            <tr>
                <td></td>
                <td>mm</td>
                <td>00 01 ... 58 59</td>
            </tr>
            <tr>
                <td>Second</td>
                <td>s</td>
                <td>0 1 ... 58 59</td>
            </tr>
            <tr>
                <td></td>
                <td>ss</td>
                <td>00 01 ... 58 59</td>
            </tr>
            <tr>
                <td>Fractional Second</td>
                <td>S</td>
                <td>0 1 ... 8 9</td>
            </tr>
            <tr>
                <td></td>
                <td>SS</td>
                <td>0 1 ... 98 99</td>
            </tr>
            <tr>
                <td></td>
                <td>SSS</td>
                <td>0 1 ... 998 999</td>
            </tr>
            <tr>
                <td>AM/PM</td>
                <td>A</td>
                <td>AM PM</td>
            </tr>
            <tr>
                <td></td>
                <td>a</td>
                <td>am pm</td>
            </tr>
            <tr>
                <td>Timezone</td>
                <td>Z</td>
                <td>-07:00 -06:00 ... +06:00 +07:00</td>
            </tr>
            <tr>
                <td></td>
                <td>ZZ</td>
                <td>-0700 -0600 ... +0600 +0700</td>
            </tr>
        </tbody>
    </table>
    <p>So, passing timestampFormat: <code>'hh:mm:ss a'</code> would set timestamp as '09:30:14 pm'.</p>
    <p><strong>NOTE</strong> - The tokens in the pattern string are case-sensitive, e.g. passing yyyy instead of YYYY
        would not show year in the date.</p>
    <ul>
        <li>Using Intl.DateTimeFormat options object</li>
    </ul>
    <p>The timestamp can also be formatted using the options defined for <a
            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#Syntax">Intl.DateTimeFormat</a>
        object. The object can be passed with some or all of the following properties:</p>
    <table>
        <thead>
            <tr>
                <th>Property</th>
                <th>Acceptable Values</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>dateStyle</td>
                <td>'full', 'long', 'medium', 'short'</td>
            </tr>
            <tr>
                <td>timeStyle</td>
                <td>'full', 'long', 'medium', 'short'</td>
            </tr>
            <tr>
                <td>weekday</td>
                <td>'long' (e.g., Thursday), 'short' (e.g., Thu), 'narrow' (e.g., T)</td>
            </tr>
            <tr>
                <td>day</td>
                <td>'numeric' (e.g., 1), '2-digit' (e.g., 01)</td>
            </tr>
            <tr>
                <td>month</td>
                <td>'numeric' (e.g., 2), '2-digit' (e.g., 02), 'long' (e.g., March), 'short' (e.g., Mar), 'narrow'
                    (e.g., M)</td>
            </tr>
            <tr>
                <td>year</td>
                <td>'numeric' (e.g., 2012), '2-digit' (e.g., 12)</td>
            </tr>
            <tr>
                <td>era</td>
                <td>'long' (e.g., Anno Domini), 'short' (e.g., AD), 'narrow' (e.g., A)</td>
            </tr>
            <tr>
                <td>hour</td>
                <td>'numeric', '2-digit'</td>
            </tr>
            <tr>
                <td>minute</td>
                <td>'numeric', '2-digit'</td>
            </tr>
            <tr>
                <td>second</td>
                <td>'numeric', '2-digit'</td>
            </tr>
            <tr>
                <td>timeZoneName</td>
                <td>'long' (e.g., British Summer Time), 'short' (e.g., GMT+1)</td>
            </tr>
            <tr>
                <td>timeZone</td>
                <td>The time zone to use. The only value implementations must recognize is &quot;UTC&quot;; the default
                    is the runtime's default time zone. Implementations may also recognize the time zone names of the
                    IANA time zone database, such as &quot;Asia/Shanghai&quot;, &quot;Asia/Kolkata&quot;,
                    &quot;America/New_York&quot;.</td>
            </tr>
            <tr>
                <td>hour12</td>
                <td>Whether to use 12-hour time (as opposed to 24-hour time). Possible values are <code>true</code> and
                    <code>false</code>
                </td>
            </tr>
        </tbody>
    </table>
    <h3 id="opening-links">Opening Links</h3>
    <p>Custom handling: <code>linkHandler: { onclick: &lt;function&gt;, target: '&lt;string&gt;' }</code></p>
    <p>In In-widget WebView : <code>linkHandler: { target: 'oda-chat-webview' }</code></p>
    <p>In new window: <code>openLinksInNewWindow: true</code></p>
    <p>The Web SDK provides various ways for you to control the target location of the URL links within the
        conversations. By default, clicking any link in the conversation opens the linked URL in the same page. You can
        configure the widget to open it in a specific target using <code>linkHandler</code> setting.</p>
    <p>The <code>linkHandler</code> setting expects an object that can take two optional fields - <code>target</code>
        and <code>onclick</code>. The <code>target</code> field accepts a string which identifies the location where the
        linked URL is to be displayed (a tab, window, or &lt;iframe&gt;). he following keywords have special meanings
        for where to load the URL:</p>
    <ul>
        <li><code>'_self'</code>: the current browsing context.</li>
        <li><code>'_blank'</code>: usually a new tab, but users can configure browsers to open a new window instead.
        </li>
        <li><code>'_parent'</code>: the parent browsing context of the current one. If no parent, behaves as
            <code>'_self'</code>.
        </li>
        <li><code>'_top'</code>: the topmost browsing context (the &quot;highest&quot; context that’s an ancestor of the
            current one). If no ancestors, behaves as <code>'_self'</code>.</li>
    </ul>
    <pre><code class="language-js"><div>settings = {
...,
<span class="hljs-attr">linkHandler</span>: { <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;_blank&#x27;</span>}
};

<span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK(settings);
</div></code></pre>
    <p>To open the links inside an iframe, you can pass its name attribute in the target property.</p>
    <pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;container&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;400&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;300&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
settings = {
  ...
  linkHandler: { <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;container&#x27;</span>}
}

<span class="hljs-keyword">var</span> Bots = <span class="hljs-keyword">new</span> WebSDK(settings);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div></code></pre>
    <p>The <code>onclick</code> property of <code>linkHandler</code> allows you to add an event listener on all anchor
        links in the conversation. The listener is fired before the link is opened, and can be used to perform actions
        based on the link. The listener is passed an <code>event</code> object as parameter which is generated by the
        click action. You can prevent the link from being opened by returning <code>false</code> from the listener. The
        listener is also bind to the anchor element which is clicked, and the <code>this</code> context referes to the
        <code>HTMLAnchorElement</code> inside the listener.
    </p>
    <pre><code class="language-js"><div>linkHandler: {
<span class="hljs-attr">onclick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The element clicked is&#x27;</span>, <span class="hljs-built_in">this</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The event fired from the click is&#x27;</span>, event);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The clicked link is&#x27;</span>, event.target.href);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Preventing the link from being opened&#x27;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
}
</div></code></pre>
    <p>You can set either one or both properties of the <code>linkHandler</code> setting, but passing one of the fields
        is required.</p>
    <p>In some scenarios, you may want to open links explicitly in a new window, overriding browser preferences. This
        can be achieved by passing <code>openLinksInNewWindow: true</code> in the settings.</p>
    <p>Finally, the chat widget also provides an in-widget WebView which can be used to display linked URLs inside the
        widget. This helps in preventing the user from navigating away from the page to a new tab or window. See <a
            href="#in-widget-webview">In-Widget WebView</a> for more details on this feature.</p>
    <h3 id="relative-timestamps">Relative Timestamps</h3>
    <p>Feature flag: <code>timestampMode: 'relative'</code></p>
    <p>Timestamp color: <code>colors.timestamp: 'color string'</code></p>
    <p>The appearance of the message timestamps can be modified with the <code>timestampMode</code> setting. When set
        <code>'relative'</code>, the timestamp is only shown before the first message of the day as a header, and for
        the new messages as an updating timestamp indicating the time passed since the message was added in the
        conversation. This relative timestamp is refreshed in following intervals if no new message is added:
    </p>
    <ul>
        <li>For first 10s</li>
        <li>Between 10s-60s</li>
        <li>Every minute between 1m-60m</li>
        <li>Every hour between 1hr-24hr</li>
        <li>Every day between 1d-30d</li>
        <li>Every month between 1m-12m</li>
        <li>Every year after first year</li>
    </ul>
    <p>As soon as a new message is added to the conversation, the relative timestamp from last message is removed, and
        added to the new message. The timestamp is also updated to start afresh for the new message.</p>
    <p>For older messages in the conversation, a timestamp header is shown indicating the date before the first message
        of the day, for all days a conversation is performed. The timestamp header format can be customized using the
        <code>timestampFormat</code> setting.
    </p>
    <h3 id="restrict-attachment-types">Restrict attachment types</h3>
    <p><code>Feature flag: enableAttachment: true</code> (default: <code>true</code>)</p>
    <p><code>Functionality configuration: shareMenuItems</code></p>
    <p>Users can share various kinds of files and their location to the skills using the share menu from the chat
        widget. By default, the share attachment popup menu shows 4 items - sharing visual media files i.e. images and
        videos, audio files, general files like documents, pdf, excel sheets etc., and location. This menu can be
        customized to show fewer options using the <code>shareMenuItems</code> setting. This setting accepts an array of
        strings where each item maps to a menu item – <code>'visual'</code> for <strong>Share Image/Video</strong>,
        <code>'audio'</code> for <strong>Share Audio</strong>, <code>'file'</code> for <strong>Share File</strong>, and
        <code>'location'</code> for <strong>Share Location</strong>. The share menu only shows the items for passed
        values, so by passing fewer items, the share menu can be modified, e.g. passing
        <code>shareMenuItems: ['audio', 'location']</code> in the settings will only show the <code>Share Audio</code>
        and <code>Share Location</code> menu items in the share popup menu. However, passing an empty array, or invalid
        values will show all menu items. To show no items, the feature can be disabled by passing
        <code>enableAttachment: false</code>.
    </p>
    <h4 id="custom-share-menu-items">Custom share menu items</h4>
    <p>Starting with 21.04, the Web SDK also allows configuring share menu items to set specific file types that users
        are allowed to upload. The custom menu item can be passed as an object to <code>shareMenuItems</code> array. It
        can be passed along with the string categories, or can also be passed without them. A custom share menu item may
        look as follows:</p>
    <pre><code class="language-js"><div>{
<span class="hljs-attr">type</span>: string,       <span class="hljs-comment">// Space separated list of file formats, pass &#x27;*&#x27; to allow all supported filie types</span>

<span class="hljs-attr">label</span>: string,      <span class="hljs-comment">// OPTIONAL, label for the share menu item, should preferably be configured through i18n strings</span>

icon?: string,      <span class="hljs-comment">// OPTIONAL, Icon image source path or SVG source string, the file icon is displayed as fallback</span>

maxSize?: number    <span class="hljs-comment">// OPTIONAL, Maximum file size allowed for upload in KiloBytes, the maximum and fallback value is 25 MB (25600 KB)</span>
}
</div></code></pre>
    <p>Following code snippet shows passing custom menu items in settings and defining their labels using
        <code>i18n</code> field.
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> settings = {
<span class="hljs-attr">shareMenuItems</span>: [ {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;odf&#x27;</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Upload ODF&#x27;</span>,
}, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;pdf&#x27;</span>
}, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;jpg png jpeg&#x27;</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;https://image-source-site/imageicon&#x27;</span>
}, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;doc docx xls&#x27;</span>,
    <span class="hljs-attr">maxSize</span>: <span class="hljs-number">4096</span>
}],
<span class="hljs-attr">i18n</span>: {
    <span class="hljs-attr">en</span>: {
        <span class="hljs-attr">share_pdf</span>: <span class="hljs-string">&#x27;Upload PDF&#x27;</span>,
        <span class="hljs-attr">share_jpg_png_jpeg</span>: <span class="hljs-string">&#x27;Upload Image&#x27;</span>,
        <span class="hljs-attr">share_doc_docx_xls</span>: <span class="hljs-string">&#x27;Upload document&#x27;</span>
    }
}
}
</div></code></pre>
    <p>As seen in the example above, the <code>i18n</code> labels for the custom menu items can be set by passing them
        with <code>share_\&lt;type joined by '_'\&gt;</code> keys. For the wildcard '*', the label can be set using
        <code>'share_all'</code> i18n key. Using <code>i18n</code> is recommended over <code>label</code> as it allows
        supporting the menu item labels in multiple languages.
    </p>
    <p>Using attachment functionality often requires updating the network security policy of the host site. The
        attachments are uploaded to ODA object storage using HTTP calls, and may get blocked by the site's <a
            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> policies. With the site blocking the
        uploads, an error can be seen in browser console indicating that the client has blocked the request due to CORS
        policy. To fix such issues, the network security policy of the host site should be updated to whitelist the ODA
        domain, allowing the upload requests to go through.
        Since the CORS policy does not apply to WebSockets, the conversations between the SDK and ODA skills are not
        impacted by such restrictions.</p>
    <p>When connecting to a client auth enabled channel on ODA platform running Version 20.12 and above, you can
        optionally make attachments more secure by passing <code>enableAttachmentSecurity: true</code>. When set to
        <code>true</code>, extra headers are passed to the attachment upload requests to ensure that they can't be
        downloaded without passing a valid signed JWT token as value of <code>token</code> query parameter in the
        attachment fetch request URL.
    </p>
    <blockquote>
        <p><strong>Note</strong>: Do not enable this setting if the skill connects to an ODA instance that's Version
            20.08 or runs on any version prior to 20.08. This property only applies to client auth-enabled connections
            to Versions 20.12 and higher of the ODA platform.</p>
    </blockquote>
    <h2 id="message-model">Message Model</h2>
    <p>To use features like headless mode and delegate, a clear understanding of skill and user messages is essential.
        Everything received from and sent to the chat server are represented as messages. This includes:</p>
    <ul>
        <li>Messages from user → skill (e.g. &quot;I want to order a Pizza&quot;)</li>
        <li>Messages from skill → user (e.g. &quot;What kind of crust do you want?&quot;)</li>
    </ul>
    <p>The following section describes each of the message types in more detail.</p>
    <h3 id="base-types">Base Types</h3>
    <p>These are the base types that are used by User → Skill messages and Skill → User messages. They are the building
        blocks for the messages.</p>
    <h4 id="action">Action</h4>
    <p>An action represents something that the user can select. Every action includes the following properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>label</td>
                <td>Label to display for the action</td>
                <td>string</td>
                <td>At least one of <code>label</code> or <code>imageUrl</code> must be present</td>
            </tr>
            <tr>
                <td>imageUrl</td>
                <td>Image to display for the action</td>
                <td>string</td>
                <td>At least one of <code>label</code> or <code>imageUrl</code> must be present</td>
            </tr>
        </tbody>
    </table>
    <h5 id="postbackaction">PostbackAction</h5>
    <p>This action will send a pre-defined postback back to the skill if the user selects the action.
        It adds the following properties to the <code>Action</code> properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>&quot;postback&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>postback</td>
                <td>The postback to be sent back if the action is selected</td>
                <td>string or JSONObject</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
<span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Large Pizza&quot;</span>,
<span class="hljs-attr">&quot;imageUrl&quot;</span>: <span class="hljs-string">&quot;https://amicis.com/images/gallery/locations/11.jpg&quot;</span>,
<span class="hljs-attr">&quot;postback&quot;</span>: {
    <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;askSize&quot;</span>,
    <span class="hljs-attr">&quot;action&quot;</span>: <span class="hljs-string">&quot;getCrust&quot;</span>
}
}
</div></code></pre>
    <h5 id="callaction">CallAction</h5>
    <p>This action will request the client to call a specified phone number on the user's behalf.
        It adds the following properties to the <code>Action</code> properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>&quot;call&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>phoneNumber</td>
                <td>The phone number to call</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;call&quot;</span>,
<span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Call Support&quot;</span>,
<span class="hljs-attr">&quot;imageUrl&quot;</span>: <span class="hljs-string">&quot;http://ahoraescuando.bluefm.com.ar/files/2016/05/cuidado.jpg&quot;</span>,
<span class="hljs-attr">&quot;phoneNumber&quot;</span>: <span class="hljs-string">&quot;18002231711&quot;</span>
}
</div></code></pre>
    <h5 id="urlaction">UrlAction</h5>
    <p>This action will request the client to open a website in a new tab or in an in-app browser.
        It adds the following properties to the <code>Action</code> properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>&quot;url&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>URL</td>
                <td>The URL of the website to display</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <h5 id="shareaction">ShareAction</h5>
    <p>This action will request the client to open a sharing dialog for the user.
        It adds the following properties to the <code>Action</code> properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>&quot;share&quot;</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <h5 id="locationaction">LocationAction</h5>
    <p>This action will request the client to ask the user for a location.
        It adds the following properties to the <code>Action</code> properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Action type for the action</td>
                <td>&quot;location&quot;</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;location&quot;</span>,
<span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Share location&quot;</span>,
<span class="hljs-attr">&quot;imageUrl&quot;</span>: <span class="hljs-string">&quot;http://images.clipartpanda.com/location-clipart-location-pin-clipart-1.jpg&quot;</span>
}
</div></code></pre>
    <h4 id="attachment">Attachment</h4>
    <p>This represents an attachment sent User → Skill or Skill → User.</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>title</td>
                <td>A title for the attachment</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>type</td>
                <td>The type of attachment</td>
                <td>string (valid values: 'audio', 'file', 'image', 'video')</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>URL</td>
                <td>The URL to download the attachment</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Oracle Open World Promotion&quot;</span>,
<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>,
<span class="hljs-attr">&quot;URL&quot;</span>: <span class="hljs-string">&quot;https://www.oracle.com/us/assets/hp07-oow17-promo-02-3737849.jpg&quot;</span>
}
</div></code></pre>
    <h4 id="card">Card</h4>
    <p>A card represents a single card in the message payload. It contains the following properties:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>title</td>
                <td>The title of the card, displayed as the first line on the card.</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>description</td>
                <td>The description of the card</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>imageUrl</td>
                <td>URL of the image that is displayed</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>URL</td>
                <td>URL of a website that is opened when taping on the card</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <h4 id="location">Location</h4>
    <p>This represents a Location object.</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>title</td>
                <td>A title for the location</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>URL</td>
                <td>A URL for displaying a map of the location</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>latitude</td>
                <td>The GPS coordinate's longitude value</td>
                <td>double</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>longitude</td>
                <td>The GPS coordinate's longitude value</td>
                <td>double</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Oracle Headquarters&quot;</span>,
<span class="hljs-attr">&quot;URL&quot;</span>: <span class="hljs-string">&quot;https://www.google.com.au/maps/place/37°31&#x27;47.3%22N+122°15&#x27;57.6%22W&quot;</span>,
<span class="hljs-attr">&quot;longitude&quot;</span>: <span class="hljs-number">-122.265987</span>,
<span class="hljs-attr">&quot;latitude&quot;</span>: <span class="hljs-number">37.529818</span>
}
</div></code></pre>
    <h3 id="conversation-messages">Conversation Messages</h3>
    <p>All messages that are part of the conversation are structured as follows:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>messagePayload</td>
                <td>Message payload</td>
                <td>Message</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>userId</td>
                <td>User ID</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p>Example conversation message</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;text&quot;</span>: <span class="hljs-string">&quot;show menu&quot;</span>,
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h3 id="message-1">Message</h3>
    <p>Message is the abstract base type for all other messages. All messages extend it to provide more information.</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <h3 id="user-message">User Message</h3>
    <p>This represents a Message sent from user → skill.</p>
    <h4 id="user-text-message">User Text Message</h4>
    <p>This is a simple text message sent to the server.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;text&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>text</td>
                <td>Text message</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;text&quot;</span>: <span class="hljs-string">&quot;Order Pizza&quot;</span>,
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h4 id="user-attachment-message">User Attachment Message</h4>
    <p>This is the attachment response message sent to the server.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;attachment&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>attachment</td>
                <td>Attachment metadata</td>
                <td>Attachment</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;attachment&quot;</span>: {
        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>,
        <span class="hljs-attr">&quot;URL&quot;</span>: <span class="hljs-string">&quot;http://oda-instance.com/attachment/v1/attachments/d43fd051-02cf-4c62-a422-313979eb9d55&quot;</span>
    },
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;attachment&quot;</span>
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h4 id="user-location-message">User Location Message</h4>
    <p>This is the location response message sent to the server.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;location&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>location</td>
                <td>User location information</td>
                <td>Location</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;location&quot;</span>: {
        <span class="hljs-attr">&quot;latitude&quot;</span>: <span class="hljs-number">45.9285271</span>,
        <span class="hljs-attr">&quot;longitude&quot;</span>: <span class="hljs-number">132.6101925</span>
    },
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;location&quot;</span>
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h4 id="user-postback-message">User Postback Message</h4>
    <p>This is the postback response message sent to the server.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;postback&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>text</td>
                <td>Text for postback</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>postback</td>
                <td>The postback of the selected action</td>
                <td>string or JSONObject</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;postback&quot;</span>: {
        <span class="hljs-attr">&quot;variables&quot;</span>: {
            <span class="hljs-attr">&quot;pizza&quot;</span>: <span class="hljs-string">&quot;Small&quot;</span>
        },
        <span class="hljs-attr">&quot;system.botId&quot;</span>: <span class="hljs-string">&quot;69F2D6BB-35BF-4BCA-99A0-A88D44A51B35&quot;</span>,
        <span class="hljs-attr">&quot;system.state&quot;</span>: <span class="hljs-string">&quot;orderPizza&quot;</span>
    },
    <span class="hljs-attr">&quot;text&quot;</span>: <span class="hljs-string">&quot;Small&quot;</span>,
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h3 id="skill-message">Skill Message</h3>
    <p>This represents a Message sent from Skill → User.</p>
    <h4 id="skill-text-message">Skill Text Message</h4>
    <p>This represents a text message.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;text&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>text</td>
                <td>Text of the message</td>
                <td>string</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
            <tr>
                <td>globalActions</td>
                <td>An array of global actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>,
    <span class="hljs-attr">&quot;text&quot;</span>: <span class="hljs-string">&quot;What do you want to do?&quot;</span>,
    <span class="hljs-attr">&quot;actions&quot;</span>: [
        {
            <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
            <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Order Pizza&quot;</span>,
            <span class="hljs-attr">&quot;postback&quot;</span>: {
                <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;askAction&quot;</span>,
                <span class="hljs-attr">&quot;action&quot;</span>: <span class="hljs-string">&quot;orderPizza&quot;</span>
            }
        },
        {
            <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
            <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Cancel A Previous Order&quot;</span>,
            <span class="hljs-attr">&quot;postback&quot;</span>: {
                <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;askAction&quot;</span>,
                <span class="hljs-attr">&quot;action&quot;</span>: <span class="hljs-string">&quot;cancelOrder&quot;</span>
            }
        }
    ]
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h4 id="skill-attachment-message">Skill Attachment Message</h4>
    <p>This represents an attachment message.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;attachment&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>attachment</td>
                <td>The attachment sent</td>
                <td>Attachment</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
            <tr>
                <td>globalActions</td>
                <td>An array of global actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <h4 id="skill-location-message">Skill Location Message</h4>
    <p>This represents a location message.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;location&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>location</td>
                <td>The location</td>
                <td>Location</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
            <tr>
                <td>globalActions</td>
                <td>An array of global actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <h4 id="skill-postback-message">Skill Postback Message</h4>
    <p>This represents a postback.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;postback&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>text</td>
                <td>Text of the message</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>postback</td>
                <td>The postback</td>
                <td>string or JSONObject</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
            <tr>
                <td>globalActions</td>
                <td>An array of global actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <h4 id="skill-card-message">Skill Card Message</h4>
    <p>This represents a set of choices displayed to the user, either horizontally like a carousal or vertically like a
        list.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;card&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>layout</td>
                <td>Whether to display the cards horizontally or vertically</td>
                <td>string (values: horizontal, vertical)</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>cards</td>
                <td>Array of cards to be rendered</td>
                <td>Array<Card>
                </td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>headerText</td>
                <td>A header text for cards</td>
                <td>string</td>
                <td>No</td>
            </tr>
            <tr>
                <td>actions</td>
                <td>An array of actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
            <tr>
                <td>globalActions</td>
                <td>An array of global actions related to the text</td>
                <td>Array<Action>
                </td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <p>Example JSON</p>
    <pre><code class="language-json"><div>{
<span class="hljs-attr">&quot;messagePayload&quot;</span>: {
    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;card&quot;</span>,
    <span class="hljs-attr">&quot;layout&quot;</span>: <span class="hljs-string">&quot;horizontal&quot;</span>,
    <span class="hljs-attr">&quot;cards&quot;</span>: [
        {
            <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Hawaiian Pizza&quot;</span>,
            <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;Ham and pineapple on thin crust&quot;</span>,
            <span class="hljs-attr">&quot;actions&quot;</span>: [
                {
                    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
                    <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Order Small&quot;</span>,
                    <span class="hljs-attr">&quot;postback&quot;</span>: {
                        <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;GetOrder&quot;</span>,
                        <span class="hljs-attr">&quot;variables&quot;</span>: {
                            <span class="hljs-attr">&quot;pizzaType&quot;</span>: <span class="hljs-string">&quot;hawaiian&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaCrust&quot;</span>: <span class="hljs-string">&quot;thin&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaSize&quot;</span>: <span class="hljs-string">&quot;small&quot;</span>
                        }
                    }
                },
                {
                    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
                    <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Order Large&quot;</span>,
                    <span class="hljs-attr">&quot;postback&quot;</span>: {
                        <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;GetOrder&quot;</span>,
                        <span class="hljs-attr">&quot;variables&quot;</span>: {
                            <span class="hljs-attr">&quot;pizzaType&quot;</span>: <span class="hljs-string">&quot;hawaiian&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaCrust&quot;</span>: <span class="hljs-string">&quot;thin&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaSize&quot;</span>: <span class="hljs-string">&quot;large&quot;</span>
                        }
                    }
                }
            ]
        },
        {
            <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Cheese Pizza&quot;</span>,
            <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;Cheese pizza (i.e. pizza with NO toppings) on thick crust&quot;</span>,
            <span class="hljs-attr">&quot;actions&quot;</span>: [
                {
                    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
                    <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Order Small&quot;</span>,
                    <span class="hljs-attr">&quot;postback&quot;</span>: {
                        <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;GetOrder&quot;</span>,
                        <span class="hljs-attr">&quot;variables&quot;</span>: {
                            <span class="hljs-attr">&quot;pizzaType&quot;</span>: <span class="hljs-string">&quot;cheese&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaCrust&quot;</span>: <span class="hljs-string">&quot;thick&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaSize&quot;</span>: <span class="hljs-string">&quot;small&quot;</span>
                        }
                    }
                },
                {
                    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;postback&quot;</span>,
                    <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Order Large&quot;</span>,
                    <span class="hljs-attr">&quot;postback&quot;</span>: {
                        <span class="hljs-attr">&quot;state&quot;</span>: <span class="hljs-string">&quot;GetOrder&quot;</span>,
                        <span class="hljs-attr">&quot;variables&quot;</span>: {
                            <span class="hljs-attr">&quot;pizzaType&quot;</span>: <span class="hljs-string">&quot;cheese&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaCrust&quot;</span>: <span class="hljs-string">&quot;thick&quot;</span>,
                            <span class="hljs-attr">&quot;pizzaSize&quot;</span>: <span class="hljs-string">&quot;large&quot;</span>
                        }
                    }
                }
            ]
        }
    ],
    <span class="hljs-attr">&quot;globalActions&quot;</span>: [
        {
            <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;call&quot;</span>,
            <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;Call for Help&quot;</span>,
            <span class="hljs-attr">&quot;phoneNumber&quot;</span>: <span class="hljs-string">&quot;123456789&quot;</span>
        }
    ]
},
<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;guest&quot;</span>
}
</div></code></pre>
    <h4 id="skill-raw-message">Skill Raw Message</h4>
    <p>This is used when a component creates the channel-specific payload itself.
        It applies the following properties to the Message:</p>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>The message type</td>
                <td>&quot;raw&quot;</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>payload</td>
                <td>The channel-specific payload</td>
                <td>JSONObject</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <h2 id="limitations">Limitations</h2>
    <p>There are a few limitations on the usage of current Web SDK.</p>
    <ul>
        <li>The skill's may start sending incorrect messages if the network goes offline for a short time during a chat
            (such as 10 seconds) before going back online. This only happens when a server response is lost due to a
            network failure. In such cases, the user may have to send the previous message again, or may need to start
            the conversation afresh. The skill can be designed to handle such cases.</li>
        <li>The attachment file size is limited to 25 MB. Larger files cannot be uploaded in this release.</li>
        <li>The SDK currently only supports a single connection to the ODA instance per userId per browser or device. If
            multiple connections are made using the same userId from several devices, or from multiple browsers on
            single device, then only the responses from the skill and digital assistant will be synchronized on all
            clients, not the user messages.</li>
    </ul>

</body>

</html>
